version: 0.1
cli:
  version: 0.10.1-beta
downloads:
  - name: go
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://golang.org/dl/go${version}.linux-amd64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://golang.org/dl/go${version}.darwin-amd64.tar.gz
        strip_components: 1
  - name: jre-11
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu11.52.13-ca-jre11.0.13-linux_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu11.52.13-ca-jre11.0.13-macosx_x64.tar.gz
        strip_components: 1
  - name: jre-17
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-linux_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-macosx_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          arm_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-macosx_aarch64.tar.gz
        strip_components: 1
  - name: node
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://nodejs.org/dist/v${version}/node-v${version}-linux-x64.tar.xz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://nodejs.org/dist/v${version}/node-v${version}-darwin-x64.tar.gz
        strip_components: 1
  - name: python
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://github.com/indygreg/python-build-standalone/releases/download/20220318/cpython-${version}+20220318-x86_64-unknown-linux-gnu-install_only.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://github.com/indygreg/python-build-standalone/releases/download/20220318/cpython-${version}+20220318-x86_64-apple-darwin-install_only.tar.gz
        strip_components: 1
  - name: ruby-build
    version: 20220125
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://github.com/rbenv/ruby-build/archive/refs/tags/v20220125.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://github.com/rbenv/ruby-build/archive/refs/tags/v20220125.tar.gz
        strip_components: 1
  - name: rust
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://static.rust-lang.org/dist/rust-${version}-x86_64-unknown-linux-gnu.tar.gz
        strip_components: 2
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://static.rust-lang.org/dist/rust-${version}-x86_64-apple-darwin.tar.gz
        strip_components: 2
environments:
  - name: SYSTEM
    environment:
      - name: PATH
        list:
          - ${path}
runtimes:
  definitions:
    - type: node
      download: node
      enabled: true
      linter_environment:
        - name: PATH
          list:
            - ${linter}/node_modules/.bin
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      system_version: ignored
      version: 14.17.4
      version_commands:
        - parse_regex: ${semver}
          run: node --version
    - type: python
      download: python
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: VIRTUAL_ENV
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      version: 3.9.11
      version_commands:
        - parse_regex: Python ${semver}
          run: python --version
    - type: go
      download: go
      enabled: true
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: GOPATH
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: GOROOT
          value: ${runtime}
        - name: GO111MODULE
          value: on
        - name: CGO_ENABLED
          value: 0
      system_version: ignored
      version: 1.16.7
      version_commands:
        - parse_regex: go version go(.*) (.*)
          run: go version
    - type: rust
      download: rust
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      version: 1.58.1
      version_commands:
        - parse_regex: ${semver}
          run: rustc --version
    - type: ruby
      download: ruby-build
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: GEM_HOME
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: LD_LIBRARY_PATH
          list:
            - ${runtime}/lib
      version: 3.1.0
      version_commands:
        - parse_regex: ruby ([0-9\.]+)(p+.*)
          run: ruby --version
    - type: java
      download: jre-11
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: JAVA_HOME
          value: ${runtime}
      version: 11.0.13
      version_commands:
        - parse_regex: ${semver}
          run: java --version
        - parse_regex: java version "(.*)"
          run: java -version
actions:
  definitions:
    - enabled: false
      name: announce
      triggers:
        - git_hooks:
            - post-checkout
          run: trunk show-announcements checkout ${0} ${1}
        - git_hooks:
            - post-merge
          run: trunk show-announcements merge
        - git_hooks:
            - pre-rebase
          run: trunk show-announcements pre-rebase ${@}
    - enabled: false
      name: git-lfs
      triggers:
        - git_hooks:
            - post-checkout
            - post-commit
            - post-merge
            - pre-push
          run: git lfs "${hook}" "${@}"
lint:
  comment_formats:
    - name: hash
      leading_delimiter: "#"
    - name: html-tag
      leading_delimiter: <!--
      trailing_delimiter: -->
    - name: hyphen-hash
      leading_delimiter: -#
    - name: slashes-block
      leading_delimiter: /*
      trailing_delimiter: "*/"
    - name: slashes-inline
      leading_delimiter: //
  files:
    - name: ALL
      regexes:
        - .+
    - name: c++-source
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - cc
        - cpp
        - cxx
        - C
    - name: c++-header
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - hh
        - hpp
        - hxx
        - H
    - name: c++
      inherit:
        - c++-source
        - c++-header
    - name: python
      comments:
        - hash
      extensions:
        - py
        - py2
        - py3
      shebangs:
        - python
        - python3
    - name: c-source
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - c
    - name: c-header
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - h
    - name: c
      inherit:
        - c-source
        - c-header
    - name: c/c++
      inherit:
        - c
        - c++
    - name: c/c++-source
      inherit:
        - c-source
        - c++-source
    - name: bazel-build
      comments:
        - hash
      extensions:
        - BUILD
      filenames:
        - BUILD
        - BUILD.bazel
    - name: bazel-workspace
      comments:
        - hash
      filenames:
        - WORKSPACE
        - WORKSPACE.bazel
    - name: starlark
      comments:
        - hash
      extensions:
        - bzl
    - name: shell
      comments:
        - hash
      extensions:
        - sh
        - bash
      shebangs:
        - sh
        - bash
    - name: zsh
      comments:
        - hash
      extensions:
        - zsh
      shebangs:
        - zsh
    - name: javascript
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - js
        - mjs
        - jsx
    - name: typescript
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - ts
        - tsx
    - name: yaml
      comments:
        - hash
      extensions:
        - yml
        - yaml
    - name: prettier_supported_configs
      filenames:
        - .prettierrc
        - .stylelintrc
    - name: css
      comments:
        - slashes-block
      extensions:
        - css
    - name: sass
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - sass
        - scss
    - name: html
      comments:
        - html-tag
      extensions:
        - html
    - name: markdown
      comments:
        - html-tag
      extensions:
        - md
        - mdx
    - name: json
      extensions:
        - json
        - jsonc
    - name: docker
      comments:
        - hash
      extensions:
        - Dockerfile
      filenames:
        - Dockerfile
    - name: go
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - go
    - name: proto
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - proto
    - name: rust
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - rs
    - name: terraform
      extensions:
        - tf
        - tf.json
    - name: ruby
      extensions:
        - rb
      shebangs:
        - ruby
    - name: gemspec
      extensions:
        - gemspec
      filenames:
        - Gemfile
    - name: kotlin
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - kt
        - kts
        - ktm
    - name: java
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - java
    - name: toml
      comments:
        - hash
      extensions:
        - toml
    - name: haml
      comments:
        - hyphen-hash
      extensions:
        - haml
    - name: graphql
      comments:
        - hash
      extensions:
        - graphql
    - name: scala
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - scala
        - sc
    - name: dotenv
      comments:
        - hash
      extensions:
        - env
  downloads:
    - name: actionlint
      version: 1.6.9
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/rhysd/actionlint/releases/download/v${version}/actionlint_${version}_linux_amd64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/rhysd/actionlint/releases/download/v${version}/actionlint_${version}_darwin_amd64.tar.gz
    - name: buf
      version: 1.0.0-rc11
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/bufbuild/buf/releases/download/v${version}/buf-Linux-x86_64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/bufbuild/buf/releases/download/v${version}/buf-Darwin-x86_64
    - name: buildifier
      version: 5.0.1
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/bazelbuild/buildtools/releases/download/${version}/buildifier-linux-amd64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/bazelbuild/buildtools/releases/download/${version}/buildifier-darwin-amd64
    - name: clang-format
      version: 14.0.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-format-${version}-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-format-${version}-macos-x86_64.tar.gz
    - name: clang-tidy
      version: 14.0.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-tidy-${version}-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-tidy-${version}-macos-x86_64.tar.gz
    - name: detekt
      version: 1.19.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/detekt/detekt/releases/download/v${version}/detekt-cli-${version}.zip
          strip_components: 1
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/detekt/detekt/releases/download/v${version}/detekt-cli-${version}.zip
          strip_components: 1
    - name: dotenv-linter
      version: 3.2.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/dotenv-linter/dotenv-linter/releases/download/v${version}/dotenv-linter-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/dotenv-linter/dotenv-linter/releases/download/v${version}/dotenv-linter-darwin-x86_64.tar.gz
    - name: hadolint
      version: 2.8.0
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Linux-x86_64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Darwin-x86_64
    - name: ktlint
      version: 0.43.2
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/pinterest/ktlint/releases/download/${version}/ktlint
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/pinterest/ktlint/releases/download/${version}/ktlint
    - name: scalafmt
      version: 3.4.3
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/scalameta/scalafmt/releases/download/v${version}/scalafmt-linux-musl
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/scalameta/scalafmt/releases/download/v${version}/scalafmt-macos
    - name: shellcheck
      version: 0.8.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.linux.x86_64.tar.xz
          strip_components: 1
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.darwin.x86_64.tar.xz
          strip_components: 1
    - name: taplo
      args:
        semver: ${version}=>(release-cli-)*(?P<semver>.*)
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/${version}/taplo-x86_64-unknown-linux-gnu.tar.gz
          version: <0.6.0
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/${version}/taplo-x86_64-apple-darwin-gnu.tar.gz
          version: <0.6.0
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/release-cli-${semver}/taplo-${semver}-x86_64-unknown-linux-gnu.tar.gz
          version: ">=0.6.0"
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/release-cli-${semver}/taplo-${semver}-x86_64-apple-darwin-gnu.tar.gz
          version: ">=0.6.0"
    - name: terraform
      version: 1.1.4
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://releases.hashicorp.com/terraform/${version}/terraform_${version}_linux_amd64.zip
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://releases.hashicorp.com/terraform/${version}/terraform_${version}_darwin_amd64.zip
    - name: tflint
      version: 0.35.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/terraform-linters/tflint/releases/download/v${version}/tflint_linux_amd64.zip
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/terraform-linters/tflint/releases/download/v${version}/tflint_darwin_amd64.zip
  linters:
    - name: actionlint
      type: actionlint
      files:
        - yaml
      command:
        - actionlint
        - -format
        - "{{json .}}"
        - ${target}
      success_codes:
        - 0
        - 1
      direct_configs:
        - .github/actionlint.yaml
        - .github/actionlint.yml
      download: actionlint
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      issue_url_format: https://github.com/rhysd/actionlint/blob/main/docs/checks.md
      known_good_version: 1.6.9
      version_command:
        parse_regex: ${semver}
        run: actionlint --version
    - name: ansible-lint
      type: ansible_lint
      command:
        - ansible-lint
        - --parseable-severity
      success_codes:
        - 0
        - 2
      direct_configs:
        - .ansible-lint
      environment:
        - name: PATH
          list:
            - ${path}
      extra_packages:
        - ansible
      good_without_config: true
      is_recommended: false
      issue_url_format: https://ansible-lint.readthedocs.io/en/latest/default_rules.html#{}
      known_good_version: 5.1.13
      package: ansible-lint
      run_linter_from: directory
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: ansible-lint --version
    - name: autopep8
      type: rewrite
      files:
        - python
      command:
        - autopep8
        - --in-place
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - .flake8
        - pyproject.toml
        - setup.cfg
        - tox.ini
      batch: true
      cache_results: true
      direct_configs:
        - .pep8
      formatter: true
      in_place: true
      issue_url_format: https://pycodestyle.pycqa.org/en/latest/intro.html#error-codes
      known_good_version: 1.5.7
      package: autopep8
      runtime: python
      stdin: true
      version_command:
        parse_regex: autopep8 ${semver}
        run: autopep8 --version
    - name: bandit
      type: bandit
      files:
        - python
      command:
        - bandit
        - --exit-zero
        - --format
        - json
        - ${target}
      success_codes:
        - 0
      batch: true
      cache_results: true
      direct_configs:
        - .bandit
      issue_url_format: https://pypi.org/project/bandit/
      known_good_version: 1.7.3
      package: bandit
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: bandit --version
    - name: black
      type: rewrite
      files:
        - python
      command:
        - black
        - -q
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: 22.3.0
      package: black[python2]
      runtime: python
      version_command:
        parse_regex: black, version (.*)
        run: black --version
    - name: black-py
      type: rewrite
      files:
        - python
      command:
        - black
        - -q
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      formatter: true
      in_place: true
      known_good_version: 22.3.0
      package: black[python2]
      runtime: python
      version_command:
        parse_regex: black, version (.*)
        run: black --version
    - name: brakeman
      type: brakeman
      files:
        - ruby
      command:
        - brakeman
        - -p
        - ${target}
        - -f
        - json
        - --no-pager
      success_codes:
        - 0
        - 1
        - 3
      direct_configs:
        - brakeman.ignore
      known_good_version: 5.1.2
      package: brakeman
      run_from_root_target: apps
      run_linter_from: root_directory
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: brakeman --version
    - name: buf-breaking
      type: buf
      files:
        - proto
      command:
        - buf
        - breaking
        - --against
        - .git#branch=${upstream-ref}
        - --error-format
        - json
        - --path
        - ${target}
      success_codes:
        - 0
        - 100
      affects_cache:
        - buf.yaml
        - buf.lock
        - buf.gen.yaml
        - buf.work.yaml
      direct_configs:
        - buf.yaml
        - buf.work.yaml
      download: buf
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
            - ${path}
      is_recommended: false
      issue_url_format: https://docs.buf.build/breaking/rules#{}
      known_good_version: 1.1.0
      run_from_root_file: buf.work.yaml
      run_linter_from: root_file
      version_command:
        parse_regex: ${semver}
        run: buf --version
    - name: buf-lint
      type: buf
      files:
        - proto
      command:
        - buf
        - lint
        - --path
        - ${target}
        - --error-format
        - json
      success_codes:
        - 0
        - 100
      affects_cache:
        - buf.yaml
        - buf.lock
        - buf.gen.yaml
        - buf.work.yaml
      direct_configs:
        - buf.yaml
      download: buf
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://docs.buf.build/lint/rules#{}
      known_good_version: 1.1.0
      run_from_root_file: buf.yaml
      run_linter_from: root_file
      version_command:
        parse_regex: ${semver}
        run: buf --version
    - name: buildifier
      type: buildifier
      files:
        - starlark
        - bazel-build
        - bazel-workspace
      command:
        - buildifier
        - --lint
        - fix
      success_codes:
        - 0
      cache_results: true
      download: buildifier
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      known_good_version: 4.0.1
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: buildifier --version
    - name: cfnlint
      type: cfnlint
      files:
        - yaml
      command:
        - cfn-lint
        - -t
        - ${target}
        - -f=json
      error_codes:
        - 32
      batch: true
      cache_results: true
      good_without_config: true
      issue_url_format: https://github.com/aws-cloudformation/cfn-lint/blob/main/docs/rules.md
      known_good_version: 0.58.2
      package: cfn-lint
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: cfn-lint --version
    - name: clang-format
      type: rewrite
      files:
        - c/c++
        - proto
      command:
        - clang-format
        - --assume-filename=${target}
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .clang-format
      download: clang-format
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      known_good_version: 14.0.0
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: clang-format --version
    - name: clang-tidy
      type: llvm
      files:
        - c/c++-source
      command:
        - clang-tidy
        - --export-fixes=-
        - ${target}
      success_codes:
        - 0
        - 1
      cache_results: true
      direct_configs:
        - .clang-tidy
      download: clang-tidy
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      include_scanner_type: compile_command
      issue_url_format: https://clang.llvm.org/extra/clang-tidy/checks/{}.html
      known_good_version: 14.0.0
      run_timeout: 10m
      version_command:
        parse_regex: ${semver}
        run: clang-tidy --version
    - name: clippy
      type: clippy
      files:
        - rust
      command:
        - cargo
        - clippy
        - --message-format
        - json
        - --
        - --cap-lints=warn
        - --no-deps
      success_codes:
        - 0
        - 101
        - 383
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      direct_configs:
        - clippy.toml
        - .clippy.toml
      disable_upstream: true
      download: rust
      environment:
        - name: PATH
          list:
            - ${linter}/bin
            - ${path}
        - name: CARGO_HOME
          value: ${cachedir}/cargo_home
        - name: CARGO_TARGET_DIR
          value: ${cachedir}/cargo_target_dir
      good_without_config: true
      issue_url_format: https://rust-lang.github.io/rust-clippy/master/#{}
      known_good_version: 1.58.1
      run_linter_from: directory
      version_command:
        parse_regex: ${semver}
        run: cargo clippy --version
    - name: detekt
      type: sarif
      files:
        - kotlin
      command:
        - detekt-cli
        - --build-upon-default-config
        - --config
        - .detekt.yaml
        - --input
        - ${target}
        - --report
        - sarif:${tmpfile}
      success_codes:
        - 0
        - 2
      direct_configs:
        - .detekt.yaml
      download: detekt
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      known_good_version: 1.19.0
      read_output_from: tmp_file
      runtime: java
      version_command:
        parse_regex: ${semver}
        run: detekt-cli --version
    - name: detekt-explicit
      type: sarif
      files:
        - kotlin
      command:
        - detekt-cli
        - --config
        - .detekt.yaml
        - --input
        - ${target}
        - --report
        - sarif:${tmpfile}
        - --auto-correct
      success_codes:
        - 0
        - 2
      direct_configs:
        - .detekt.yaml
      download: detekt
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      known_good_version: 1.19.0
      read_output_from: tmp_file
      runtime: java
      version_command:
        parse_regex: ${semver}
        run: detekt-cli --version
    - name: detekt-gradle
      type: detekt_gradle
      files:
        - kotlin
      command:
        - ${workspace}/gradlew
        - detekt
        - --info
        - --continue
      success_codes:
        - 0
        - 1
      disable_upstream: true
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      run_timeout: 5m
    - name: dotenv-linter
      type: rewrite
      files:
        - dotenv
      command:
        - dotenv-linter
        - --not-check-updates
        - fix
        - --quiet
        - --no-backup
        - ${target}
      success_codes:
        - 0
      cache_results: true
      download: dotenv-linter
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      in_place: true
      version_command:
        parse_regex: dotenv-linter ${semver}
        run: dotenv-linter --version
    - name: eslint
      type: eslint
      files:
        - typescript
        - javascript
      command:
        - eslint
        - --format
        - json
        - ${target}
      error_codes:
        - 2
      affects_cache:
        - .eslintignore
        - package.json
        - tsconfig.json
      batch: true
      direct_configs:
        - .eslintrc
        - .eslintrc.js
        - .eslintrc.cjs
        - .eslintrc.yaml
        - .eslintrc.yml
        - .eslintrc.json
      enabled: true
      issue_url_format: https://eslint.org/docs/rules/{}
      known_good_version: 8.10.0
      package: eslint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: eslint --version
    - name: flake8
      type: flake8
      files:
        - python
      command:
        - flake8
        - ${target}
        - --format
        - TRUNK-FLAKE8:%(path)sTRUNK-FLAKE8%(row)dTRUNK-FLAKE8%(col)dTRUNK-FLAKE8%(code)sTRUNK-FLAKE8%(text)s
        - --exit-zero
      success_codes:
        - 0
      affects_cache:
        - setup.cfg
        - tox.ini
      batch: true
      cache_results: true
      direct_configs:
        - .flake8
      issue_url_format: https://www.flake8rules.com/rules/{}.html
      known_good_version: 4.0.1
      package: flake8
      run_linter_from: parent_directory
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: flake8 --version
    - name: gitleaks
      type: gitleaks
      files:
        - ALL
      command:
        - gitleaks
        - --quiet
        - --no-git
        - --path=${target}
        - --leaks-exit-code=101
        - --append-repo-config
      success_codes:
        - 0
        - 101
      direct_configs:
        - .gitleaks.config
        - .gitleaks.toml
      enabled: true
      good_without_config: true
      known_good_version: 8.3.0
      package: github.com/zricethezav/gitleaks/v${major_version}
      runtime: go
    - name: gofmt
      type: rewrite
      files:
        - go
      command:
        - gofmt
        - ${target}
      success_codes:
        - 0
      cache_results: true
      download: go
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      good_without_config: true
      known_good_version: 1.16.7
      stdin: true
    - name: goimports
      type: rewrite
      files:
        - go
      command:
        - goimports
        - ${target}
      success_codes:
        - 0
      cache_results: true
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      known_good_version: 0.10.0
      package: golang.org/x/tools/cmd/goimports
      runtime: go
      stdin: true
    - name: golangci-lint
      type: golangci_lint
      files:
        - go
      command:
        - golangci-lint
        - run
        - --out-format
        - json
        - --timeout
        - 10m
        - --concurrency
        - 1
        - --exclude
        - gofmt
        - --allow-parallel-runners
        - --issues-exit-code
        - 0
        - ${target}
      success_codes:
        - 0
        - 2
        - 7
      affects_cache:
        - go.mod
        - go.sum
      direct_configs:
        - .golangci.yml
        - .golangci.yaml
        - .golangci.toml
        - .golangci.json
      disable_upstream: true
      environment:
        - name: GOLANGCI_LINT_CACHE
          value: ${cachedir}
        - name: PATH
          list:
            - ${path}
        - name: GO111MODULE
          value: auto
      good_without_config: true
      issue_url_format: https://golangci-lint.run/usage/linters/
      known_good_version: 1.42.1
      package: github.com/golangci/golangci-lint/cmd/golangci-lint
      run_from_root_file: go.mod
      run_linter_from: root_file
      run_timeout: 10m
      runtime: go
      version_command:
        parse_regex: ${semver}
        run: golangci-lint --version
    - name: hadolint
      type: hadolint
      files:
        - docker
      command:
        - hadolint
        - ${target}
        - -f
        - json
        - --no-fail
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .hadolint.yaml
      download: hadolint
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://github.com/hadolint/hadolint/wiki/{}
      known_good_version: 2.8.0
      version_command:
        parse_regex: ${semver}
        run: hadolint --version
    - name: haml-lint
      type: haml_lint
      files:
        - haml
      command:
        - haml-lint
        - ${target}
        - --reporter=json
      success_codes:
        - 0
        - 65
      batch: true
      cache_results: false
      direct_configs:
        - .haml-lint.yml
      good_without_config: true
      is_recommended: true
      known_good_version: 0.40.0
      package: haml_lint
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: haml-lint --version
    - name: isort
      type: rewrite
      files:
        - python
      command:
        - isort
        - -q
        - --overwrite-in-place
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
        - setup.cfg
        - tox.ini
        - .editorconfig
      batch: true
      direct_configs:
        - .isort.cfg
      formatter: true
      in_place: true
      issue_url_format: https://pypi.org/project/flake8-isort/
      known_good_version: 5.9.3
      package: isort
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: isort --version-number
    - name: ktlint
      type: ktlint
      files:
        - kotlin
      command:
        - ktlint
        - --stdin
        - -F
        - --reporter=json,output=${tmpfile}
      success_codes:
        - 0
        - 1
      affects_cache:
        - .editorconfig
      download: ktlint
      environment:
        - name: PATH
          list:
            - ${linter}
        - name: LANG
          value: en_US.UTF-8
      good_without_config: true
      is_recommended: false
      known_good_version: 0.43.2
      runtime: java
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: ktlint --version
    - name: markdownlint
      type: markdownlint
      files:
        - markdown
      command:
        - markdownlint
        - ${target}
        - --json
      success_codes:
        - 0
        - 1
      batch: true
      cache_results: true
      direct_configs:
        - .markdownlint.json
        - .markdownlint.yaml
        - .markdownlint.yml
        - .markdownlintrc
        - .markdownlint-cli2.json
        - .markdownlint-cli2.yaml
        - .markdownlint-cli2.jsonc
      good_without_config: true
      issue_url_format: https://github.com/DavidAnson/markdownlint/blob/main/doc/Rules.md#{}
      known_good_version: 0.31.1
      package: markdownlint-cli
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: markdownlint --version
    - name: mypy
      type: mypy
      files:
        - python
      command:
        - mypy
        - --ignore-missing-imports
        - --follow-imports=skip
        - --show-error-codes
        - --show-column-numbers
        - --no-strict-optional
        - ${target}
      success_codes:
        - 0
        - 1
      affects_cache:
        - pyproject.toml
        - setup.cfg
      direct_configs:
        - mypy.ini
        - .mypy.ini
      is_recommended: false
      issue_url_format: https://mypy.readthedocs.io/en/stable/error_code_list.html
      known_good_version: 0.931
      package: mypy
      runtime: python
      stdin: false
      version_command:
        parse_regex: ${semver}
        run: mypy --version
    - name: prettier
      type: rewrite
      files:
        - typescript
        - yaml
        - css
        - sass
        - html
        - markdown
        - json
        - javascript
        - graphql
        - prettier_supported_configs
      command:
        - prettier
        - -w
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - package.json
        - .editorconfig
      batch: true
      direct_configs:
        - .prettierrc
        - .prettierrc.json
        - .prettierrc.yml
        - .prettierrc.yaml
        - .prettierrc.json5
        - .prettierrc.js
        - .prettierrc.cjs
        - prettier.config.js
        - prettier.config.cjs
        - .prettierrc.toml
      enabled: true
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: 2.5.1
      package: prettier
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: prettier --version
    - name: pylint
      type: pylint
      files:
        - python
      command:
        - pylint
        - --exit-zero
        - -f
        - json
        - ${target}
      error_codes:
        - 32
      affects_cache:
        - pyproject.toml
        - setup.cfg
      batch: true
      cache_results: true
      direct_configs:
        - pylintrc
        - .pylintrc
      issue_url_format: http://pylint-messages.wikidot.com/messages:{}
      known_good_version: 2.11.1
      package: pylint
      runtime: python
      version_command:
        parse_regex: pylint ${semver}
        run: pylint --version
    - name: rubocop
      type: rubocop
      files:
        - ruby
        - gemspec
      command:
        - rubocop
        - --stderr
        - --format
        - json
        - ${target}
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .rubocop.yml
      issue_url_format: https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/{}
      known_good_version: 1.22.2
      package: rubocop
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rubocop --version
    - name: rubocop-fmt
      type: rewrite
      files:
        - ruby
        - gemspec
      command:
        - rubocop
        - --stderr
        - --fix-layout
        - ${target}
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .rubocop.yml
      formatter: true
      in_place: true
      known_good_version: 1.22.2
      package: rubocop
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rubocop --version
    - name: rufo
      type: rewrite
      files:
        - ruby
      command:
        - rufo
        - ${target}
      success_codes:
        - 0
        - 3
      batch: true
      cache_results: true
      direct_configs:
        - .rufo
      formatter: true
      in_place: true
      known_good_version: 0.1.13
      package: rufo
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rufo --version
    - name: rustfmt
      type: rewrite
      files:
        - rust
      command:
        - rustfmt
      success_codes:
        - 0
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      cache_results: true
      direct_configs:
        - rustfmt.toml
        - .rustfmt.toml
      download: rust
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      good_without_config: true
      known_good_version: 1.58.1
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: rustfmt --version
    - name: scalafmt
      type: rewrite
      files:
        - scala
      command:
        - scalafmt
        - --stdin
        - --stdout
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .scalafmt.conf
      download: scalafmt
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      run_from_root_target: .scalafmt.conf
      run_linter_from: root_file
      stdin: true
      version_command:
        parse_regex: scalafmt ${semver}
        run: scalafmt --version
    - name: semgrep
      type: semgrep
      files:
        - python
        - javascript
        - go
      command:
        - semgrep
        - --config=p/r2c-ci
        - ${target}
        - --json
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .semgrep.yaml
      environment:
        - name: PATH
          list:
            - ${path}
      known_good_version: 0.83.0
      package: semgrep
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: semgrep --version
    - name: shellcheck
      type: shellcheck
      files:
        - shell
      command:
        - shellcheck
        - ${target}
        - -f
        - json
        - --external-sources
      error_codes:
        - 2
      direct_configs:
        - .shellcheckrc
        - shellcheckrc
      download: shellcheck
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://github.com/koalaman/shellcheck/wiki/{}
      known_good_version: 0.8.0
      version_command:
        parse_regex: ${semver}
        run: shellcheck --version
    - name: shfmt
      type: shfmt
      files:
        - shell
      command:
        - shfmt
        - -s
        - -filename
        - ${target}
        - "-"
      success_codes:
        - 0
        - 1
      affects_cache:
        - .editorconfig
      cache_results: true
      formatter: true
      good_without_config: true
      known_good_version: 3.4.0
      package: mvdan.cc/sh/v${major_version}/cmd/shfmt
      runtime: go
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: shfmt --version
    - name: standardrb
      type: rubocop
      files:
        - ruby
        - gemspec
      command:
        - standardrb
        - ${target}
        - --stderr
        - --format
        - json
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .standard.yml
      issue_url_format: https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/{}
      known_good_version: 1.3.0
      package: standard
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: standardrb --version
    - name: stylelint
      type: stylelint
      files:
        - css
        - sass
      command:
        - stylelint
        - -f
        - json
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - package.json
        - .stylelintignore
      direct_configs:
        - .stylelintrc
        - .stylelintrc.json
        - .stylelintrc.yml
        - .stylelintrc.yaml
        - .stylelintrc.js
        - .stylelintrc.cjs
      known_good_version: 14.6.1
      package: stylelint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: stylelint --version
    - name: stylelint-fmt
      type: rewrite
      files:
        - css
        - sass
      command:
        - stylelint
        - --fix
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - package.json
        - .stylelintignore
      direct_configs:
        - .stylelintrc
        - .stylelintrc.json
        - .stylelintrc.yml
        - .stylelintrc.yaml
        - .stylelintrc.js
        - .stylelintrc.cjs
      formatter: true
      in_place: true
      known_good_version: 14.6.1
      package: stylelint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: stylelint --version
    - name: taplo
      type: taplo
      files:
        - toml
      command:
        - taplo
        - lint
        - ${target}
      success_codes:
        - 0
        - 1
      direct_configs:
        - .taplo.toml
        - taplo.toml
      download: taplo
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      known_good_version: release-cli-0.6.0
      version_command:
        parse_regex: Taplo TOML Utility ${semver}
        run: taplo --version
    - name: taplo-fmt
      type: rewrite
      files:
        - toml
      command:
        - taplo
        - format
        - ${target}
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .taplo.toml
        - taplo.toml
      download: taplo
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: release-cli-0.6.0
      version_command:
        parse_regex: Taplo TOML Utility ${semver}
        run: taplo --version
    - name: terraform-fmt
      type: rewrite
      files:
        - terraform
      command:
        - terraform
        - fmt
        - -no-color
        - "-"
      success_codes:
        - 0
      cache_results: true
      download: terraform
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      known_good_version: 1.1.0
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: terraform --version
    - name: terraform-validate
      type: terraform_validate
      files:
        - terraform
      command:
        - terraform
        - validate
        - -json
      success_codes:
        - 0
        - 1
      download: terraform
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      known_good_version: 1.1.0
      run_linter_from: directory
      version_command:
        parse_regex: ${semver}
        run: terraform --version
    - name: tflint
      type: sarif
      files:
        - terraform
      command:
        - tflint
        - --format=sarif
        - ${target}
        - --force
      success_codes:
        - 0
      direct_configs:
        - .tflint.hcl
      download: tflint
      environment:
        - name: PATH
          list:
            - ${linter}
        - name: TFLINT_PLUGIN_DIR
          value: ${shared_cachedir}
      good_without_config: true
      known_good_version: 0.35.0
      prepare_command:
        - tflint
        - --init
      read_output_from: stdout
      version_command:
        parse_regex: ${semver}
        run: tflint --version
    - name: yapf
      type: rewrite
      files:
        - python
      command:
        - yapf
        - --in-place
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - setup.cfg
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      direct_configs:
        - .style.yapf
        - .yapfignore
      formatter: true
      in_place: true
      known_good_version: 0.32.0
      package: yapf
      runtime: python
      version_command:
        parse_regex: yapf ${semver}
        run: yapf --version
  triggers:
    - linters:
        - hadolint
      paths:
        - dockerfile
        - dockerfile.*
      targets:
        - dockerfile
        - dockerfile.*
    - linters:
        - buf-lint
        - buf-breaking
      paths:
        - protos/**/*.proto
      targets:
        - protos/**/*.proto
  enabled:
    - actionlint@1.6.12
    - buf-breaking@1.3.1
    - buf-lint@1.3.1
    - dotenv-linter@3.2.0
    - eslint@8.13.0
    - gitleaks@8.7.2
    - hadolint@2.10.0
    - prettier@2.6.2
  bazel:
    paths:
      system:
        - bazel
        - bazelisk
      workspace:
        - tools/bazel
        - bazelisk
  ignore:
    - linters:
        - ALL
      paths:
        - src/gen/**
    - linters:
        - prettier
      paths:
        - protos
        - package-lock.json
    - linters:
        - ALL
      paths:
        - "**/trunk"
version: 0.1
cli:
  version: 0.10.1-beta
downloads:
  - name: go
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://golang.org/dl/go${version}.linux-amd64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://golang.org/dl/go${version}.darwin-amd64.tar.gz
        strip_components: 1
  - name: jre-11
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu11.52.13-ca-jre11.0.13-linux_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu11.52.13-ca-jre11.0.13-macosx_x64.tar.gz
        strip_components: 1
  - name: jre-17
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-linux_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-macosx_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          arm_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-macosx_aarch64.tar.gz
        strip_components: 1
  - name: node
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://nodejs.org/dist/v${version}/node-v${version}-linux-x64.tar.xz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://nodejs.org/dist/v${version}/node-v${version}-darwin-x64.tar.gz
        strip_components: 1
  - name: python
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://github.com/indygreg/python-build-standalone/releases/download/20220318/cpython-${version}+20220318-x86_64-unknown-linux-gnu-install_only.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://github.com/indygreg/python-build-standalone/releases/download/20220318/cpython-${version}+20220318-x86_64-apple-darwin-install_only.tar.gz
        strip_components: 1
  - name: ruby-build
    version: 20220125
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://github.com/rbenv/ruby-build/archive/refs/tags/v20220125.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://github.com/rbenv/ruby-build/archive/refs/tags/v20220125.tar.gz
        strip_components: 1
  - name: rust
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://static.rust-lang.org/dist/rust-${version}-x86_64-unknown-linux-gnu.tar.gz
        strip_components: 2
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://static.rust-lang.org/dist/rust-${version}-x86_64-apple-darwin.tar.gz
        strip_components: 2
environments:
  - name: SYSTEM
    environment:
      - name: PATH
        list:
          - ${path}
runtimes:
  definitions:
    - type: node
      download: node
      enabled: true
      linter_environment:
        - name: PATH
          list:
            - ${linter}/node_modules/.bin
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      system_version: ignored
      version: 14.17.4
      version_commands:
        - parse_regex: ${semver}
          run: node --version
    - type: python
      download: python
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: VIRTUAL_ENV
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      version: 3.9.11
      version_commands:
        - parse_regex: Python ${semver}
          run: python --version
    - type: go
      download: go
      enabled: true
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: GOPATH
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: GOROOT
          value: ${runtime}
        - name: GO111MODULE
          value: on
        - name: CGO_ENABLED
          value: 0
      system_version: ignored
      version: 1.16.7
      version_commands:
        - parse_regex: go version go(.*) (.*)
          run: go version
    - type: rust
      download: rust
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      version: 1.58.1
      version_commands:
        - parse_regex: ${semver}
          run: rustc --version
    - type: ruby
      download: ruby-build
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: GEM_HOME
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: LD_LIBRARY_PATH
          list:
            - ${runtime}/lib
      version: 3.1.0
      version_commands:
        - parse_regex: ruby ([0-9\.]+)(p+.*)
          run: ruby --version
    - type: java
      download: jre-11
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: JAVA_HOME
          value: ${runtime}
      version: 11.0.13
      version_commands:
        - parse_regex: ${semver}
          run: java --version
        - parse_regex: java version "(.*)"
          run: java -version
actions:
  definitions:
    - enabled: false
      name: announce
      triggers:
        - git_hooks:
            - post-checkout
          run: trunk show-announcements checkout ${0} ${1}
        - git_hooks:
            - post-merge
          run: trunk show-announcements merge
        - git_hooks:
            - pre-rebase
          run: trunk show-announcements pre-rebase ${@}
    - enabled: false
      name: git-lfs
      triggers:
        - git_hooks:
            - post-checkout
            - post-commit
            - post-merge
            - pre-push
          run: git lfs "${hook}" "${@}"
lint:
  comment_formats:
    - name: hash
      leading_delimiter: "#"
    - name: html-tag
      leading_delimiter: <!--
      trailing_delimiter: -->
    - name: hyphen-hash
      leading_delimiter: -#
    - name: slashes-block
      leading_delimiter: /*
      trailing_delimiter: "*/"
    - name: slashes-inline
      leading_delimiter: //
  files:
    - name: ALL
      regexes:
        - .+
    - name: c++-source
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - cc
        - cpp
        - cxx
        - C
    - name: c++-header
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - hh
        - hpp
        - hxx
        - H
    - name: c++
      inherit:
        - c++-source
        - c++-header
    - name: python
      comments:
        - hash
      extensions:
        - py
        - py2
        - py3
      shebangs:
        - python
        - python3
    - name: c-source
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - c
    - name: c-header
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - h
    - name: c
      inherit:
        - c-source
        - c-header
    - name: c/c++
      inherit:
        - c
        - c++
    - name: c/c++-source
      inherit:
        - c-source
        - c++-source
    - name: bazel-build
      comments:
        - hash
      extensions:
        - BUILD
      filenames:
        - BUILD
        - BUILD.bazel
    - name: bazel-workspace
      comments:
        - hash
      filenames:
        - WORKSPACE
        - WORKSPACE.bazel
    - name: starlark
      comments:
        - hash
      extensions:
        - bzl
    - name: shell
      comments:
        - hash
      extensions:
        - sh
        - bash
      shebangs:
        - sh
        - bash
    - name: zsh
      comments:
        - hash
      extensions:
        - zsh
      shebangs:
        - zsh
    - name: javascript
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - js
        - mjs
        - jsx
    - name: typescript
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - ts
        - tsx
    - name: yaml
      comments:
        - hash
      extensions:
        - yml
        - yaml
    - name: prettier_supported_configs
      filenames:
        - .prettierrc
        - .stylelintrc
    - name: css
      comments:
        - slashes-block
      extensions:
        - css
    - name: sass
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - sass
        - scss
    - name: html
      comments:
        - html-tag
      extensions:
        - html
    - name: markdown
      comments:
        - html-tag
      extensions:
        - md
        - mdx
    - name: json
      extensions:
        - json
        - jsonc
    - name: docker
      comments:
        - hash
      extensions:
        - Dockerfile
      filenames:
        - Dockerfile
    - name: go
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - go
    - name: proto
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - proto
    - name: rust
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - rs
    - name: terraform
      extensions:
        - tf
        - tf.json
    - name: ruby
      extensions:
        - rb
      shebangs:
        - ruby
    - name: gemspec
      extensions:
        - gemspec
      filenames:
        - Gemfile
    - name: kotlin
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - kt
        - kts
        - ktm
    - name: java
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - java
    - name: toml
      comments:
        - hash
      extensions:
        - toml
    - name: haml
      comments:
        - hyphen-hash
      extensions:
        - haml
    - name: graphql
      comments:
        - hash
      extensions:
        - graphql
    - name: scala
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - scala
        - sc
    - name: dotenv
      comments:
        - hash
      extensions:
        - env
  downloads:
    - name: actionlint
      version: 1.6.9
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/rhysd/actionlint/releases/download/v${version}/actionlint_${version}_linux_amd64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/rhysd/actionlint/releases/download/v${version}/actionlint_${version}_darwin_amd64.tar.gz
    - name: buf
      version: 1.0.0-rc11
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/bufbuild/buf/releases/download/v${version}/buf-Linux-x86_64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/bufbuild/buf/releases/download/v${version}/buf-Darwin-x86_64
    - name: buildifier
      version: 5.0.1
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/bazelbuild/buildtools/releases/download/${version}/buildifier-linux-amd64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/bazelbuild/buildtools/releases/download/${version}/buildifier-darwin-amd64
    - name: clang-format
      version: 14.0.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-format-${version}-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-format-${version}-macos-x86_64.tar.gz
    - name: clang-tidy
      version: 14.0.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-tidy-${version}-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-tidy-${version}-macos-x86_64.tar.gz
    - name: detekt
      version: 1.19.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/detekt/detekt/releases/download/v${version}/detekt-cli-${version}.zip
          strip_components: 1
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/detekt/detekt/releases/download/v${version}/detekt-cli-${version}.zip
          strip_components: 1
    - name: dotenv-linter
      version: 3.2.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/dotenv-linter/dotenv-linter/releases/download/v${version}/dotenv-linter-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/dotenv-linter/dotenv-linter/releases/download/v${version}/dotenv-linter-darwin-x86_64.tar.gz
    - name: hadolint
      version: 2.8.0
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Linux-x86_64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Darwin-x86_64
    - name: ktlint
      version: 0.43.2
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/pinterest/ktlint/releases/download/${version}/ktlint
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/pinterest/ktlint/releases/download/${version}/ktlint
    - name: scalafmt
      version: 3.4.3
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/scalameta/scalafmt/releases/download/v${version}/scalafmt-linux-musl
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/scalameta/scalafmt/releases/download/v${version}/scalafmt-macos
    - name: shellcheck
      version: 0.8.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.linux.x86_64.tar.xz
          strip_components: 1
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.darwin.x86_64.tar.xz
          strip_components: 1
    - name: taplo
      args:
        semver: ${version}=>(release-cli-)*(?P<semver>.*)
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/${version}/taplo-x86_64-unknown-linux-gnu.tar.gz
          version: <0.6.0
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/${version}/taplo-x86_64-apple-darwin-gnu.tar.gz
          version: <0.6.0
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/release-cli-${semver}/taplo-${semver}-x86_64-unknown-linux-gnu.tar.gz
          version: ">=0.6.0"
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/release-cli-${semver}/taplo-${semver}-x86_64-apple-darwin-gnu.tar.gz
          version: ">=0.6.0"
    - name: terraform
      version: 1.1.4
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://releases.hashicorp.com/terraform/${version}/terraform_${version}_linux_amd64.zip
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://releases.hashicorp.com/terraform/${version}/terraform_${version}_darwin_amd64.zip
    - name: tflint
      version: 0.35.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/terraform-linters/tflint/releases/download/v${version}/tflint_linux_amd64.zip
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/terraform-linters/tflint/releases/download/v${version}/tflint_darwin_amd64.zip
  linters:
    - name: actionlint
      type: actionlint
      files:
        - yaml
      command:
        - actionlint
        - -format
        - "{{json .}}"
        - ${target}
      success_codes:
        - 0
        - 1
      direct_configs:
        - .github/actionlint.yaml
        - .github/actionlint.yml
      download: actionlint
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      issue_url_format: https://github.com/rhysd/actionlint/blob/main/docs/checks.md
      known_good_version: 1.6.9
      version_command:
        parse_regex: ${semver}
        run: actionlint --version
    - name: ansible-lint
      type: ansible_lint
      command:
        - ansible-lint
        - --parseable-severity
      success_codes:
        - 0
        - 2
      direct_configs:
        - .ansible-lint
      environment:
        - name: PATH
          list:
            - ${path}
      extra_packages:
        - ansible
      good_without_config: true
      is_recommended: false
      issue_url_format: https://ansible-lint.readthedocs.io/en/latest/default_rules.html#{}
      known_good_version: 5.1.13
      package: ansible-lint
      run_linter_from: directory
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: ansible-lint --version
    - name: autopep8
      type: rewrite
      files:
        - python
      command:
        - autopep8
        - --in-place
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - .flake8
        - pyproject.toml
        - setup.cfg
        - tox.ini
      batch: true
      cache_results: true
      direct_configs:
        - .pep8
      formatter: true
      in_place: true
      issue_url_format: https://pycodestyle.pycqa.org/en/latest/intro.html#error-codes
      known_good_version: 1.5.7
      package: autopep8
      runtime: python
      stdin: true
      version_command:
        parse_regex: autopep8 ${semver}
        run: autopep8 --version
    - name: bandit
      type: bandit
      files:
        - python
      command:
        - bandit
        - --exit-zero
        - --format
        - json
        - ${target}
      success_codes:
        - 0
      batch: true
      cache_results: true
      direct_configs:
        - .bandit
      issue_url_format: https://pypi.org/project/bandit/
      known_good_version: 1.7.3
      package: bandit
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: bandit --version
    - name: black
      type: rewrite
      files:
        - python
      command:
        - black
        - -q
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: 22.3.0
      package: black[python2]
      runtime: python
      version_command:
        parse_regex: black, version (.*)
        run: black --version
    - name: black-py
      type: rewrite
      files:
        - python
      command:
        - black
        - -q
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      formatter: true
      in_place: true
      known_good_version: 22.3.0
      package: black[python2]
      runtime: python
      version_command:
        parse_regex: black, version (.*)
        run: black --version
    - name: brakeman
      type: brakeman
      files:
        - ruby
      command:
        - brakeman
        - -p
        - ${target}
        - -f
        - json
        - --no-pager
      success_codes:
        - 0
        - 1
        - 3
      direct_configs:
        - brakeman.ignore
      known_good_version: 5.1.2
      package: brakeman
      run_from_root_target: apps
      run_linter_from: root_directory
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: brakeman --version
    - name: buf-breaking
      type: buf
      files:
        - proto
      command:
        - buf
        - breaking
        - --against
        - buf.build/ride/wallet-service
        - --error-format
        - json
        - --path
        - ${target}
      success_codes:
        - 0
        - 100
      affects_cache:
        - buf.yaml
        - buf.lock
        - buf.gen.yaml
        - buf.work.yaml
      direct_configs:
        - buf.yaml
        - buf.work.yaml
      download: buf
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
            - ${path}
      is_recommended: false
      issue_url_format: https://docs.buf.build/breaking/rules#{}
      known_good_version: 1.1.0
      run_from_root_file: buf.work.yaml
      run_linter_from: root_file
      version_command:
        parse_regex: ${semver}
        run: buf --version
    - name: buf-lint
      type: buf
      files:
        - proto
      command:
        - buf
        - lint
        - --path
        - ${target}
        - --error-format
        - json
      success_codes:
        - 0
        - 100
      affects_cache:
        - buf.yaml
        - buf.lock
        - buf.gen.yaml
        - buf.work.yaml
      direct_configs:
        - buf.yaml
      download: buf
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://docs.buf.build/lint/rules#{}
      known_good_version: 1.1.0
      run_from_root_file: buf.yaml
      run_linter_from: root_file
      version_command:
        parse_regex: ${semver}
        run: buf --version
    - name: buildifier
      type: buildifier
      files:
        - starlark
        - bazel-build
        - bazel-workspace
      command:
        - buildifier
        - --lint
        - fix
      success_codes:
        - 0
      cache_results: true
      download: buildifier
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      known_good_version: 4.0.1
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: buildifier --version
    - name: cfnlint
      type: cfnlint
      files:
        - yaml
      command:
        - cfn-lint
        - -t
        - ${target}
        - -f=json
      error_codes:
        - 32
      batch: true
      cache_results: true
      good_without_config: true
      issue_url_format: https://github.com/aws-cloudformation/cfn-lint/blob/main/docs/rules.md
      known_good_version: 0.58.2
      package: cfn-lint
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: cfn-lint --version
    - name: clang-format
      type: rewrite
      files:
        - c/c++
        - proto
      command:
        - clang-format
        - --assume-filename=${target}
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .clang-format
      download: clang-format
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      known_good_version: 14.0.0
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: clang-format --version
    - name: clang-tidy
      type: llvm
      files:
        - c/c++-source
      command:
        - clang-tidy
        - --export-fixes=-
        - ${target}
      success_codes:
        - 0
        - 1
      cache_results: true
      direct_configs:
        - .clang-tidy
      download: clang-tidy
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      include_scanner_type: compile_command
      issue_url_format: https://clang.llvm.org/extra/clang-tidy/checks/{}.html
      known_good_version: 14.0.0
      run_timeout: 10m
      version_command:
        parse_regex: ${semver}
        run: clang-tidy --version
    - name: clippy
      type: clippy
      files:
        - rust
      command:
        - cargo
        - clippy
        - --message-format
        - json
        - --
        - --cap-lints=warn
        - --no-deps
      success_codes:
        - 0
        - 101
        - 383
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      direct_configs:
        - clippy.toml
        - .clippy.toml
      disable_upstream: true
      download: rust
      environment:
        - name: PATH
          list:
            - ${linter}/bin
            - ${path}
        - name: CARGO_HOME
          value: ${cachedir}/cargo_home
        - name: CARGO_TARGET_DIR
          value: ${cachedir}/cargo_target_dir
      good_without_config: true
      issue_url_format: https://rust-lang.github.io/rust-clippy/master/#{}
      known_good_version: 1.58.1
      run_linter_from: directory
      version_command:
        parse_regex: ${semver}
        run: cargo clippy --version
    - name: detekt
      type: sarif
      files:
        - kotlin
      command:
        - detekt-cli
        - --build-upon-default-config
        - --config
        - .detekt.yaml
        - --input
        - ${target}
        - --report
        - sarif:${tmpfile}
      success_codes:
        - 0
        - 2
      direct_configs:
        - .detekt.yaml
      download: detekt
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      known_good_version: 1.19.0
      read_output_from: tmp_file
      runtime: java
      version_command:
        parse_regex: ${semver}
        run: detekt-cli --version
    - name: detekt-explicit
      type: sarif
      files:
        - kotlin
      command:
        - detekt-cli
        - --config
        - .detekt.yaml
        - --input
        - ${target}
        - --report
        - sarif:${tmpfile}
        - --auto-correct
      success_codes:
        - 0
        - 2
      direct_configs:
        - .detekt.yaml
      download: detekt
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      known_good_version: 1.19.0
      read_output_from: tmp_file
      runtime: java
      version_command:
        parse_regex: ${semver}
        run: detekt-cli --version
    - name: detekt-gradle
      type: detekt_gradle
      files:
        - kotlin
      command:
        - ${workspace}/gradlew
        - detekt
        - --info
        - --continue
      success_codes:
        - 0
        - 1
      disable_upstream: true
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      run_timeout: 5m
    - name: dotenv-linter
      type: rewrite
      files:
        - dotenv
      command:
        - dotenv-linter
        - --not-check-updates
        - fix
        - --quiet
        - --no-backup
        - ${target}
      success_codes:
        - 0
      cache_results: true
      download: dotenv-linter
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      in_place: true
      version_command:
        parse_regex: dotenv-linter ${semver}
        run: dotenv-linter --version
    - name: eslint
      type: eslint
      files:
        - typescript
        - javascript
      command:
        - eslint
        - --format
        - json
        - ${target}
      error_codes:
        - 2
      affects_cache:
        - .eslintignore
        - package.json
        - tsconfig.json
      batch: true
      direct_configs:
        - .eslintrc
        - .eslintrc.js
        - .eslintrc.cjs
        - .eslintrc.yaml
        - .eslintrc.yml
        - .eslintrc.json
      enabled: true
      issue_url_format: https://eslint.org/docs/rules/{}
      known_good_version: 8.10.0
      package: eslint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: eslint --version
    - name: flake8
      type: flake8
      files:
        - python
      command:
        - flake8
        - ${target}
        - --format
        - TRUNK-FLAKE8:%(path)sTRUNK-FLAKE8%(row)dTRUNK-FLAKE8%(col)dTRUNK-FLAKE8%(code)sTRUNK-FLAKE8%(text)s
        - --exit-zero
      success_codes:
        - 0
      affects_cache:
        - setup.cfg
        - tox.ini
      batch: true
      cache_results: true
      direct_configs:
        - .flake8
      issue_url_format: https://www.flake8rules.com/rules/{}.html
      known_good_version: 4.0.1
      package: flake8
      run_linter_from: parent_directory
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: flake8 --version
    - name: gitleaks
      type: gitleaks
      files:
        - ALL
      command:
        - gitleaks
        - --quiet
        - --no-git
        - --path=${target}
        - --leaks-exit-code=101
        - --append-repo-config
      success_codes:
        - 0
        - 101
      direct_configs:
        - .gitleaks.config
        - .gitleaks.toml
      enabled: true
      good_without_config: true
      known_good_version: 8.3.0
      package: github.com/zricethezav/gitleaks/v${major_version}
      runtime: go
    - name: gofmt
      type: rewrite
      files:
        - go
      command:
        - gofmt
        - ${target}
      success_codes:
        - 0
      cache_results: true
      download: go
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      good_without_config: true
      known_good_version: 1.16.7
      stdin: true
    - name: goimports
      type: rewrite
      files:
        - go
      command:
        - goimports
        - ${target}
      success_codes:
        - 0
      cache_results: true
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      known_good_version: 0.10.0
      package: golang.org/x/tools/cmd/goimports
      runtime: go
      stdin: true
    - name: golangci-lint
      type: golangci_lint
      files:
        - go
      command:
        - golangci-lint
        - run
        - --out-format
        - json
        - --timeout
        - 10m
        - --concurrency
        - 1
        - --exclude
        - gofmt
        - --allow-parallel-runners
        - --issues-exit-code
        - 0
        - ${target}
      success_codes:
        - 0
        - 2
        - 7
      affects_cache:
        - go.mod
        - go.sum
      direct_configs:
        - .golangci.yml
        - .golangci.yaml
        - .golangci.toml
        - .golangci.json
      disable_upstream: true
      environment:
        - name: GOLANGCI_LINT_CACHE
          value: ${cachedir}
        - name: PATH
          list:
            - ${path}
        - name: GO111MODULE
          value: auto
      good_without_config: true
      issue_url_format: https://golangci-lint.run/usage/linters/
      known_good_version: 1.42.1
      package: github.com/golangci/golangci-lint/cmd/golangci-lint
      run_from_root_file: go.mod
      run_linter_from: root_file
      run_timeout: 10m
      runtime: go
      version_command:
        parse_regex: ${semver}
        run: golangci-lint --version
    - name: hadolint
      type: hadolint
      files:
        - docker
      command:
        - hadolint
        - ${target}
        - -f
        - json
        - --no-fail
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .hadolint.yaml
      download: hadolint
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://github.com/hadolint/hadolint/wiki/{}
      known_good_version: 2.8.0
      version_command:
        parse_regex: ${semver}
        run: hadolint --version
    - name: haml-lint
      type: haml_lint
      files:
        - haml
      command:
        - haml-lint
        - ${target}
        - --reporter=json
      success_codes:
        - 0
        - 65
      batch: true
      cache_results: false
      direct_configs:
        - .haml-lint.yml
      good_without_config: true
      is_recommended: true
      known_good_version: 0.40.0
      package: haml_lint
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: haml-lint --version
    - name: isort
      type: rewrite
      files:
        - python
      command:
        - isort
        - -q
        - --overwrite-in-place
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
        - setup.cfg
        - tox.ini
        - .editorconfig
      batch: true
      direct_configs:
        - .isort.cfg
      formatter: true
      in_place: true
      issue_url_format: https://pypi.org/project/flake8-isort/
      known_good_version: 5.9.3
      package: isort
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: isort --version-number
    - name: ktlint
      type: ktlint
      files:
        - kotlin
      command:
        - ktlint
        - --stdin
        - -F
        - --reporter=json,output=${tmpfile}
      success_codes:
        - 0
        - 1
      affects_cache:
        - .editorconfig
      download: ktlint
      environment:
        - name: PATH
          list:
            - ${linter}
        - name: LANG
          value: en_US.UTF-8
      good_without_config: true
      is_recommended: false
      known_good_version: 0.43.2
      runtime: java
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: ktlint --version
    - name: markdownlint
      type: markdownlint
      files:
        - markdown
      command:
        - markdownlint
        - ${target}
        - --json
      success_codes:
        - 0
        - 1
      batch: true
      cache_results: true
      direct_configs:
        - .markdownlint.json
        - .markdownlint.yaml
        - .markdownlint.yml
        - .markdownlintrc
        - .markdownlint-cli2.json
        - .markdownlint-cli2.yaml
        - .markdownlint-cli2.jsonc
      good_without_config: true
      issue_url_format: https://github.com/DavidAnson/markdownlint/blob/main/doc/Rules.md#{}
      known_good_version: 0.31.1
      package: markdownlint-cli
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: markdownlint --version
    - name: mypy
      type: mypy
      files:
        - python
      command:
        - mypy
        - --ignore-missing-imports
        - --follow-imports=skip
        - --show-error-codes
        - --show-column-numbers
        - --no-strict-optional
        - ${target}
      success_codes:
        - 0
        - 1
      affects_cache:
        - pyproject.toml
        - setup.cfg
      direct_configs:
        - mypy.ini
        - .mypy.ini
      is_recommended: false
      issue_url_format: https://mypy.readthedocs.io/en/stable/error_code_list.html
      known_good_version: 0.931
      package: mypy
      runtime: python
      stdin: false
      version_command:
        parse_regex: ${semver}
        run: mypy --version
    - name: prettier
      type: rewrite
      files:
        - typescript
        - yaml
        - css
        - sass
        - html
        - markdown
        - json
        - javascript
        - graphql
        - prettier_supported_configs
      command:
        - prettier
        - -w
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - package.json
        - .editorconfig
      batch: true
      direct_configs:
        - .prettierrc
        - .prettierrc.json
        - .prettierrc.yml
        - .prettierrc.yaml
        - .prettierrc.json5
        - .prettierrc.js
        - .prettierrc.cjs
        - prettier.config.js
        - prettier.config.cjs
        - .prettierrc.toml
      enabled: true
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: 2.5.1
      package: prettier
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: prettier --version
    - name: pylint
      type: pylint
      files:
        - python
      command:
        - pylint
        - --exit-zero
        - -f
        - json
        - ${target}
      error_codes:
        - 32
      affects_cache:
        - pyproject.toml
        - setup.cfg
      batch: true
      cache_results: true
      direct_configs:
        - pylintrc
        - .pylintrc
      issue_url_format: http://pylint-messages.wikidot.com/messages:{}
      known_good_version: 2.11.1
      package: pylint
      runtime: python
      version_command:
        parse_regex: pylint ${semver}
        run: pylint --version
    - name: rubocop
      type: rubocop
      files:
        - ruby
        - gemspec
      command:
        - rubocop
        - --stderr
        - --format
        - json
        - ${target}
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .rubocop.yml
      issue_url_format: https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/{}
      known_good_version: 1.22.2
      package: rubocop
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rubocop --version
    - name: rubocop-fmt
      type: rewrite
      files:
        - ruby
        - gemspec
      command:
        - rubocop
        - --stderr
        - --fix-layout
        - ${target}
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .rubocop.yml
      formatter: true
      in_place: true
      known_good_version: 1.22.2
      package: rubocop
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rubocop --version
    - name: rufo
      type: rewrite
      files:
        - ruby
      command:
        - rufo
        - ${target}
      success_codes:
        - 0
        - 3
      batch: true
      cache_results: true
      direct_configs:
        - .rufo
      formatter: true
      in_place: true
      known_good_version: 0.1.13
      package: rufo
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rufo --version
    - name: rustfmt
      type: rewrite
      files:
        - rust
      command:
        - rustfmt
      success_codes:
        - 0
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      cache_results: true
      direct_configs:
        - rustfmt.toml
        - .rustfmt.toml
      download: rust
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      good_without_config: true
      known_good_version: 1.58.1
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: rustfmt --version
    - name: scalafmt
      type: rewrite
      files:
        - scala
      command:
        - scalafmt
        - --stdin
        - --stdout
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .scalafmt.conf
      download: scalafmt
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      run_from_root_target: .scalafmt.conf
      run_linter_from: root_file
      stdin: true
      version_command:
        parse_regex: scalafmt ${semver}
        run: scalafmt --version
    - name: semgrep
      type: semgrep
      files:
        - python
        - javascript
        - go
      command:
        - semgrep
        - --config=p/r2c-ci
        - ${target}
        - --json
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .semgrep.yaml
      environment:
        - name: PATH
          list:
            - ${path}
      known_good_version: 0.83.0
      package: semgrep
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: semgrep --version
    - name: shellcheck
      type: shellcheck
      files:
        - shell
      command:
        - shellcheck
        - ${target}
        - -f
        - json
        - --external-sources
      error_codes:
        - 2
      direct_configs:
        - .shellcheckrc
        - shellcheckrc
      download: shellcheck
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://github.com/koalaman/shellcheck/wiki/{}
      known_good_version: 0.8.0
      version_command:
        parse_regex: ${semver}
        run: shellcheck --version
    - name: shfmt
      type: shfmt
      files:
        - shell
      command:
        - shfmt
        - -s
        - -filename
        - ${target}
        - "-"
      success_codes:
        - 0
        - 1
      affects_cache:
        - .editorconfig
      cache_results: true
      formatter: true
      good_without_config: true
      known_good_version: 3.4.0
      package: mvdan.cc/sh/v${major_version}/cmd/shfmt
      runtime: go
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: shfmt --version
    - name: standardrb
      type: rubocop
      files:
        - ruby
        - gemspec
      command:
        - standardrb
        - ${target}
        - --stderr
        - --format
        - json
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .standard.yml
      issue_url_format: https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/{}
      known_good_version: 1.3.0
      package: standard
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: standardrb --version
    - name: stylelint
      type: stylelint
      files:
        - css
        - sass
      command:
        - stylelint
        - -f
        - json
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - package.json
        - .stylelintignore
      direct_configs:
        - .stylelintrc
        - .stylelintrc.json
        - .stylelintrc.yml
        - .stylelintrc.yaml
        - .stylelintrc.js
        - .stylelintrc.cjs
      known_good_version: 14.6.1
      package: stylelint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: stylelint --version
    - name: stylelint-fmt
      type: rewrite
      files:
        - css
        - sass
      command:
        - stylelint
        - --fix
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - package.json
        - .stylelintignore
      direct_configs:
        - .stylelintrc
        - .stylelintrc.json
        - .stylelintrc.yml
        - .stylelintrc.yaml
        - .stylelintrc.js
        - .stylelintrc.cjs
      formatter: true
      in_place: true
      known_good_version: 14.6.1
      package: stylelint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: stylelint --version
    - name: taplo
      type: taplo
      files:
        - toml
      command:
        - taplo
        - lint
        - ${target}
      success_codes:
        - 0
        - 1
      direct_configs:
        - .taplo.toml
        - taplo.toml
      download: taplo
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      known_good_version: release-cli-0.6.0
      version_command:
        parse_regex: Taplo TOML Utility ${semver}
        run: taplo --version
    - name: taplo-fmt
      type: rewrite
      files:
        - toml
      command:
        - taplo
        - format
        - ${target}
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .taplo.toml
        - taplo.toml
      download: taplo
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: release-cli-0.6.0
      version_command:
        parse_regex: Taplo TOML Utility ${semver}
        run: taplo --version
    - name: terraform-fmt
      type: rewrite
      files:
        - terraform
      command:
        - terraform
        - fmt
        - -no-color
        - "-"
      success_codes:
        - 0
      cache_results: true
      download: terraform
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      known_good_version: 1.1.0
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: terraform --version
    - name: terraform-validate
      type: terraform_validate
      files:
        - terraform
      command:
        - terraform
        - validate
        - -json
      success_codes:
        - 0
        - 1
      download: terraform
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      known_good_version: 1.1.0
      run_linter_from: directory
      version_command:
        parse_regex: ${semver}
        run: terraform --version
    - name: tflint
      type: sarif
      files:
        - terraform
      command:
        - tflint
        - --format=sarif
        - ${target}
        - --force
      success_codes:
        - 0
      direct_configs:
        - .tflint.hcl
      download: tflint
      environment:
        - name: PATH
          list:
            - ${linter}
        - name: TFLINT_PLUGIN_DIR
          value: ${shared_cachedir}
      good_without_config: true
      known_good_version: 0.35.0
      prepare_command:
        - tflint
        - --init
      read_output_from: stdout
      version_command:
        parse_regex: ${semver}
        run: tflint --version
    - name: yapf
      type: rewrite
      files:
        - python
      command:
        - yapf
        - --in-place
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - setup.cfg
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      direct_configs:
        - .style.yapf
        - .yapfignore
      formatter: true
      in_place: true
      known_good_version: 0.32.0
      package: yapf
      runtime: python
      version_command:
        parse_regex: yapf ${semver}
        run: yapf --version
  triggers:
    - linters:
        - hadolint
      paths:
        - dockerfile
        - dockerfile.*
      targets:
        - dockerfile
        - dockerfile.*
    - linters:
        - buf-lint
        - buf-breaking
      paths:
        - protos/**/*.proto
      targets:
        - protos/**/*.proto
  enabled:
    - actionlint@1.6.12
    - buf-breaking@1.3.1
    - buf-lint@1.3.1
    - dotenv-linter@3.2.0
    - eslint@8.13.0
    - gitleaks@8.7.2
    - hadolint@2.10.0
    - prettier@2.6.2
  bazel:
    paths:
      system:
        - bazel
        - bazelisk
      workspace:
        - tools/bazel
        - bazelisk
  ignore:
    - linters:
        - ALL
      paths:
        - src/gen/**
    - linters:
        - prettier
      paths:
        - protos
        - package-lock.json
    - linters:
        - ALL
      paths:
        - "**/trunk"
version: 0.1
cli:
  version: 0.10.1-beta
downloads:
  - name: go
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://golang.org/dl/go${version}.linux-amd64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://golang.org/dl/go${version}.darwin-amd64.tar.gz
        strip_components: 1
  - name: jre-11
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu11.52.13-ca-jre11.0.13-linux_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu11.52.13-ca-jre11.0.13-macosx_x64.tar.gz
        strip_components: 1
  - name: jre-17
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-linux_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-macosx_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          arm_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-macosx_aarch64.tar.gz
        strip_components: 1
  - name: node
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://nodejs.org/dist/v${version}/node-v${version}-linux-x64.tar.xz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://nodejs.org/dist/v${version}/node-v${version}-darwin-x64.tar.gz
        strip_components: 1
  - name: python
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://github.com/indygreg/python-build-standalone/releases/download/20220318/cpython-${version}+20220318-x86_64-unknown-linux-gnu-install_only.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://github.com/indygreg/python-build-standalone/releases/download/20220318/cpython-${version}+20220318-x86_64-apple-darwin-install_only.tar.gz
        strip_components: 1
  - name: ruby-build
    version: 20220125
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://github.com/rbenv/ruby-build/archive/refs/tags/v20220125.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://github.com/rbenv/ruby-build/archive/refs/tags/v20220125.tar.gz
        strip_components: 1
  - name: rust
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://static.rust-lang.org/dist/rust-${version}-x86_64-unknown-linux-gnu.tar.gz
        strip_components: 2
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://static.rust-lang.org/dist/rust-${version}-x86_64-apple-darwin.tar.gz
        strip_components: 2
environments:
  - name: SYSTEM
    environment:
      - name: PATH
        list:
          - ${path}
runtimes:
  definitions:
    - type: node
      download: node
      enabled: true
      linter_environment:
        - name: PATH
          list:
            - ${linter}/node_modules/.bin
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      system_version: ignored
      version: 14.17.4
      version_commands:
        - parse_regex: ${semver}
          run: node --version
    - type: python
      download: python
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: VIRTUAL_ENV
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      version: 3.9.11
      version_commands:
        - parse_regex: Python ${semver}
          run: python --version
    - type: go
      download: go
      enabled: true
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: GOPATH
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: GOROOT
          value: ${runtime}
        - name: GO111MODULE
          value: on
        - name: CGO_ENABLED
          value: 0
      system_version: ignored
      version: 1.16.7
      version_commands:
        - parse_regex: go version go(.*) (.*)
          run: go version
    - type: rust
      download: rust
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      version: 1.58.1
      version_commands:
        - parse_regex: ${semver}
          run: rustc --version
    - type: ruby
      download: ruby-build
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: GEM_HOME
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: LD_LIBRARY_PATH
          list:
            - ${runtime}/lib
      version: 3.1.0
      version_commands:
        - parse_regex: ruby ([0-9\.]+)(p+.*)
          run: ruby --version
    - type: java
      download: jre-11
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: JAVA_HOME
          value: ${runtime}
      version: 11.0.13
      version_commands:
        - parse_regex: ${semver}
          run: java --version
        - parse_regex: java version "(.*)"
          run: java -version
actions:
  definitions:
    - enabled: false
      name: announce
      triggers:
        - git_hooks:
            - post-checkout
          run: trunk show-announcements checkout ${0} ${1}
        - git_hooks:
            - post-merge
          run: trunk show-announcements merge
        - git_hooks:
            - pre-rebase
          run: trunk show-announcements pre-rebase ${@}
    - enabled: false
      name: git-lfs
      triggers:
        - git_hooks:
            - post-checkout
            - post-commit
            - post-merge
            - pre-push
          run: git lfs "${hook}" "${@}"
lint:
  comment_formats:
    - name: hash
      leading_delimiter: "#"
    - name: html-tag
      leading_delimiter: <!--
      trailing_delimiter: -->
    - name: hyphen-hash
      leading_delimiter: -#
    - name: slashes-block
      leading_delimiter: /*
      trailing_delimiter: "*/"
    - name: slashes-inline
      leading_delimiter: //
  files:
    - name: ALL
      regexes:
        - .+
    - name: c++-source
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - cc
        - cpp
        - cxx
        - C
    - name: c++-header
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - hh
        - hpp
        - hxx
        - H
    - name: c++
      inherit:
        - c++-source
        - c++-header
    - name: python
      comments:
        - hash
      extensions:
        - py
        - py2
        - py3
      shebangs:
        - python
        - python3
    - name: c-source
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - c
    - name: c-header
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - h
    - name: c
      inherit:
        - c-source
        - c-header
    - name: c/c++
      inherit:
        - c
        - c++
    - name: c/c++-source
      inherit:
        - c-source
        - c++-source
    - name: bazel-build
      comments:
        - hash
      extensions:
        - BUILD
      filenames:
        - BUILD
        - BUILD.bazel
    - name: bazel-workspace
      comments:
        - hash
      filenames:
        - WORKSPACE
        - WORKSPACE.bazel
    - name: starlark
      comments:
        - hash
      extensions:
        - bzl
    - name: shell
      comments:
        - hash
      extensions:
        - sh
        - bash
      shebangs:
        - sh
        - bash
    - name: zsh
      comments:
        - hash
      extensions:
        - zsh
      shebangs:
        - zsh
    - name: javascript
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - js
        - mjs
        - jsx
    - name: typescript
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - ts
        - tsx
    - name: yaml
      comments:
        - hash
      extensions:
        - yml
        - yaml
    - name: prettier_supported_configs
      filenames:
        - .prettierrc
        - .stylelintrc
    - name: css
      comments:
        - slashes-block
      extensions:
        - css
    - name: sass
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - sass
        - scss
    - name: html
      comments:
        - html-tag
      extensions:
        - html
    - name: markdown
      comments:
        - html-tag
      extensions:
        - md
        - mdx
    - name: json
      extensions:
        - json
        - jsonc
    - name: docker
      comments:
        - hash
      extensions:
        - Dockerfile
      filenames:
        - Dockerfile
    - name: go
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - go
    - name: proto
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - proto
    - name: rust
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - rs
    - name: terraform
      extensions:
        - tf
        - tf.json
    - name: ruby
      extensions:
        - rb
      shebangs:
        - ruby
    - name: gemspec
      extensions:
        - gemspec
      filenames:
        - Gemfile
    - name: kotlin
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - kt
        - kts
        - ktm
    - name: java
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - java
    - name: toml
      comments:
        - hash
      extensions:
        - toml
    - name: haml
      comments:
        - hyphen-hash
      extensions:
        - haml
    - name: graphql
      comments:
        - hash
      extensions:
        - graphql
    - name: scala
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - scala
        - sc
    - name: dotenv
      comments:
        - hash
      extensions:
        - env
  downloads:
    - name: actionlint
      version: 1.6.9
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/rhysd/actionlint/releases/download/v${version}/actionlint_${version}_linux_amd64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/rhysd/actionlint/releases/download/v${version}/actionlint_${version}_darwin_amd64.tar.gz
    - name: buf
      version: 1.0.0-rc11
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/bufbuild/buf/releases/download/v${version}/buf-Linux-x86_64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/bufbuild/buf/releases/download/v${version}/buf-Darwin-x86_64
    - name: buildifier
      version: 5.0.1
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/bazelbuild/buildtools/releases/download/${version}/buildifier-linux-amd64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/bazelbuild/buildtools/releases/download/${version}/buildifier-darwin-amd64
    - name: clang-format
      version: 14.0.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-format-${version}-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-format-${version}-macos-x86_64.tar.gz
    - name: clang-tidy
      version: 14.0.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-tidy-${version}-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-tidy-${version}-macos-x86_64.tar.gz
    - name: detekt
      version: 1.19.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/detekt/detekt/releases/download/v${version}/detekt-cli-${version}.zip
          strip_components: 1
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/detekt/detekt/releases/download/v${version}/detekt-cli-${version}.zip
          strip_components: 1
    - name: dotenv-linter
      version: 3.2.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/dotenv-linter/dotenv-linter/releases/download/v${version}/dotenv-linter-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/dotenv-linter/dotenv-linter/releases/download/v${version}/dotenv-linter-darwin-x86_64.tar.gz
    - name: hadolint
      version: 2.8.0
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Linux-x86_64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Darwin-x86_64
    - name: ktlint
      version: 0.43.2
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/pinterest/ktlint/releases/download/${version}/ktlint
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/pinterest/ktlint/releases/download/${version}/ktlint
    - name: scalafmt
      version: 3.4.3
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/scalameta/scalafmt/releases/download/v${version}/scalafmt-linux-musl
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/scalameta/scalafmt/releases/download/v${version}/scalafmt-macos
    - name: shellcheck
      version: 0.8.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.linux.x86_64.tar.xz
          strip_components: 1
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.darwin.x86_64.tar.xz
          strip_components: 1
    - name: taplo
      args:
        semver: ${version}=>(release-cli-)*(?P<semver>.*)
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/${version}/taplo-x86_64-unknown-linux-gnu.tar.gz
          version: <0.6.0
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/${version}/taplo-x86_64-apple-darwin-gnu.tar.gz
          version: <0.6.0
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/release-cli-${semver}/taplo-${semver}-x86_64-unknown-linux-gnu.tar.gz
          version: ">=0.6.0"
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/release-cli-${semver}/taplo-${semver}-x86_64-apple-darwin-gnu.tar.gz
          version: ">=0.6.0"
    - name: terraform
      version: 1.1.4
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://releases.hashicorp.com/terraform/${version}/terraform_${version}_linux_amd64.zip
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://releases.hashicorp.com/terraform/${version}/terraform_${version}_darwin_amd64.zip
    - name: tflint
      version: 0.35.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/terraform-linters/tflint/releases/download/v${version}/tflint_linux_amd64.zip
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/terraform-linters/tflint/releases/download/v${version}/tflint_darwin_amd64.zip
  linters:
    - name: actionlint
      type: actionlint
      files:
        - yaml
      command:
        - actionlint
        - -format
        - "{{json .}}"
        - ${target}
      success_codes:
        - 0
        - 1
      direct_configs:
        - .github/actionlint.yaml
        - .github/actionlint.yml
      download: actionlint
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      issue_url_format: https://github.com/rhysd/actionlint/blob/main/docs/checks.md
      known_good_version: 1.6.9
      version_command:
        parse_regex: ${semver}
        run: actionlint --version
    - name: ansible-lint
      type: ansible_lint
      command:
        - ansible-lint
        - --parseable-severity
      success_codes:
        - 0
        - 2
      direct_configs:
        - .ansible-lint
      environment:
        - name: PATH
          list:
            - ${path}
      extra_packages:
        - ansible
      good_without_config: true
      is_recommended: false
      issue_url_format: https://ansible-lint.readthedocs.io/en/latest/default_rules.html#{}
      known_good_version: 5.1.13
      package: ansible-lint
      run_linter_from: directory
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: ansible-lint --version
    - name: autopep8
      type: rewrite
      files:
        - python
      command:
        - autopep8
        - --in-place
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - .flake8
        - pyproject.toml
        - setup.cfg
        - tox.ini
      batch: true
      cache_results: true
      direct_configs:
        - .pep8
      formatter: true
      in_place: true
      issue_url_format: https://pycodestyle.pycqa.org/en/latest/intro.html#error-codes
      known_good_version: 1.5.7
      package: autopep8
      runtime: python
      stdin: true
      version_command:
        parse_regex: autopep8 ${semver}
        run: autopep8 --version
    - name: bandit
      type: bandit
      files:
        - python
      command:
        - bandit
        - --exit-zero
        - --format
        - json
        - ${target}
      success_codes:
        - 0
      batch: true
      cache_results: true
      direct_configs:
        - .bandit
      issue_url_format: https://pypi.org/project/bandit/
      known_good_version: 1.7.3
      package: bandit
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: bandit --version
    - name: black
      type: rewrite
      files:
        - python
      command:
        - black
        - -q
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: 22.3.0
      package: black[python2]
      runtime: python
      version_command:
        parse_regex: black, version (.*)
        run: black --version
    - name: black-py
      type: rewrite
      files:
        - python
      command:
        - black
        - -q
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      formatter: true
      in_place: true
      known_good_version: 22.3.0
      package: black[python2]
      runtime: python
      version_command:
        parse_regex: black, version (.*)
        run: black --version
    - name: brakeman
      type: brakeman
      files:
        - ruby
      command:
        - brakeman
        - -p
        - ${target}
        - -f
        - json
        - --no-pager
      success_codes:
        - 0
        - 1
        - 3
      direct_configs:
        - brakeman.ignore
      known_good_version: 5.1.2
      package: brakeman
      run_from_root_target: apps
      run_linter_from: root_directory
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: brakeman --version
    - name: buf-breaking
      type: buf
      files:
        - proto
      command:
        - buf
        - breaking
        - --against
        - buf.build/ride/trip-service
        - --error-format
        - json
        - --path
        - ${target}
      success_codes:
        - 0
        - 100
      affects_cache:
        - buf.yaml
        - buf.lock
        - buf.gen.yaml
        - buf.work.yaml
      direct_configs:
        - buf.yaml
        - buf.work.yaml
      download: buf
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
            - ${path}
      is_recommended: false
      issue_url_format: https://docs.buf.build/breaking/rules#{}
      known_good_version: 1.1.0
      run_from_root_file: buf.work.yaml
      run_linter_from: root_file
      version_command:
        parse_regex: ${semver}
        run: buf --version
    - name: buf-lint
      type: buf
      files:
        - proto
      command:
        - buf
        - lint
        - --path
        - ${target}
        - --error-format
        - json
      success_codes:
        - 0
        - 100
      affects_cache:
        - buf.yaml
        - buf.lock
        - buf.gen.yaml
        - buf.work.yaml
      direct_configs:
        - buf.yaml
      download: buf
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://docs.buf.build/lint/rules#{}
      known_good_version: 1.1.0
      run_from_root_file: buf.yaml
      run_linter_from: root_file
      version_command:
        parse_regex: ${semver}
        run: buf --version
    - name: buildifier
      type: buildifier
      files:
        - starlark
        - bazel-build
        - bazel-workspace
      command:
        - buildifier
        - --lint
        - fix
      success_codes:
        - 0
      cache_results: true
      download: buildifier
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      known_good_version: 4.0.1
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: buildifier --version
    - name: cfnlint
      type: cfnlint
      files:
        - yaml
      command:
        - cfn-lint
        - -t
        - ${target}
        - -f=json
      error_codes:
        - 32
      batch: true
      cache_results: true
      good_without_config: true
      issue_url_format: https://github.com/aws-cloudformation/cfn-lint/blob/main/docs/rules.md
      known_good_version: 0.58.2
      package: cfn-lint
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: cfn-lint --version
    - name: clang-format
      type: rewrite
      files:
        - c/c++
        - proto
      command:
        - clang-format
        - --assume-filename=${target}
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .clang-format
      download: clang-format
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      known_good_version: 14.0.0
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: clang-format --version
    - name: clang-tidy
      type: llvm
      files:
        - c/c++-source
      command:
        - clang-tidy
        - --export-fixes=-
        - ${target}
      success_codes:
        - 0
        - 1
      cache_results: true
      direct_configs:
        - .clang-tidy
      download: clang-tidy
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      include_scanner_type: compile_command
      issue_url_format: https://clang.llvm.org/extra/clang-tidy/checks/{}.html
      known_good_version: 14.0.0
      run_timeout: 10m
      version_command:
        parse_regex: ${semver}
        run: clang-tidy --version
    - name: clippy
      type: clippy
      files:
        - rust
      command:
        - cargo
        - clippy
        - --message-format
        - json
        - --
        - --cap-lints=warn
        - --no-deps
      success_codes:
        - 0
        - 101
        - 383
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      direct_configs:
        - clippy.toml
        - .clippy.toml
      disable_upstream: true
      download: rust
      environment:
        - name: PATH
          list:
            - ${linter}/bin
            - ${path}
        - name: CARGO_HOME
          value: ${cachedir}/cargo_home
        - name: CARGO_TARGET_DIR
          value: ${cachedir}/cargo_target_dir
      good_without_config: true
      issue_url_format: https://rust-lang.github.io/rust-clippy/master/#{}
      known_good_version: 1.58.1
      run_linter_from: directory
      version_command:
        parse_regex: ${semver}
        run: cargo clippy --version
    - name: detekt
      type: sarif
      files:
        - kotlin
      command:
        - detekt-cli
        - --build-upon-default-config
        - --config
        - .detekt.yaml
        - --input
        - ${target}
        - --report
        - sarif:${tmpfile}
      success_codes:
        - 0
        - 2
      direct_configs:
        - .detekt.yaml
      download: detekt
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      known_good_version: 1.19.0
      read_output_from: tmp_file
      runtime: java
      version_command:
        parse_regex: ${semver}
        run: detekt-cli --version
    - name: detekt-explicit
      type: sarif
      files:
        - kotlin
      command:
        - detekt-cli
        - --config
        - .detekt.yaml
        - --input
        - ${target}
        - --report
        - sarif:${tmpfile}
        - --auto-correct
      success_codes:
        - 0
        - 2
      direct_configs:
        - .detekt.yaml
      download: detekt
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      known_good_version: 1.19.0
      read_output_from: tmp_file
      runtime: java
      version_command:
        parse_regex: ${semver}
        run: detekt-cli --version
    - name: detekt-gradle
      type: detekt_gradle
      files:
        - kotlin
      command:
        - ${workspace}/gradlew
        - detekt
        - --info
        - --continue
      success_codes:
        - 0
        - 1
      disable_upstream: true
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      run_timeout: 5m
    - name: dotenv-linter
      type: rewrite
      files:
        - dotenv
      command:
        - dotenv-linter
        - --not-check-updates
        - fix
        - --quiet
        - --no-backup
        - ${target}
      success_codes:
        - 0
      cache_results: true
      download: dotenv-linter
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      in_place: true
      version_command:
        parse_regex: dotenv-linter ${semver}
        run: dotenv-linter --version
    - name: eslint
      type: eslint
      files:
        - typescript
        - javascript
      command:
        - eslint
        - --format
        - json
        - ${target}
      error_codes:
        - 2
      affects_cache:
        - .eslintignore
        - package.json
        - tsconfig.json
      batch: true
      direct_configs:
        - .eslintrc
        - .eslintrc.js
        - .eslintrc.cjs
        - .eslintrc.yaml
        - .eslintrc.yml
        - .eslintrc.json
      enabled: true
      issue_url_format: https://eslint.org/docs/rules/{}
      known_good_version: 8.10.0
      package: eslint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: eslint --version
    - name: flake8
      type: flake8
      files:
        - python
      command:
        - flake8
        - ${target}
        - --format
        - TRUNK-FLAKE8:%(path)sTRUNK-FLAKE8%(row)dTRUNK-FLAKE8%(col)dTRUNK-FLAKE8%(code)sTRUNK-FLAKE8%(text)s
        - --exit-zero
      success_codes:
        - 0
      affects_cache:
        - setup.cfg
        - tox.ini
      batch: true
      cache_results: true
      direct_configs:
        - .flake8
      issue_url_format: https://www.flake8rules.com/rules/{}.html
      known_good_version: 4.0.1
      package: flake8
      run_linter_from: parent_directory
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: flake8 --version
    - name: gitleaks
      type: gitleaks
      files:
        - ALL
      command:
        - gitleaks
        - --quiet
        - --no-git
        - --path=${target}
        - --leaks-exit-code=101
        - --append-repo-config
      success_codes:
        - 0
        - 101
      direct_configs:
        - .gitleaks.config
        - .gitleaks.toml
      enabled: true
      good_without_config: true
      known_good_version: 8.3.0
      package: github.com/zricethezav/gitleaks/v${major_version}
      runtime: go
    - name: gofmt
      type: rewrite
      files:
        - go
      command:
        - gofmt
        - ${target}
      success_codes:
        - 0
      cache_results: true
      download: go
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      good_without_config: true
      known_good_version: 1.16.7
      stdin: true
    - name: goimports
      type: rewrite
      files:
        - go
      command:
        - goimports
        - ${target}
      success_codes:
        - 0
      cache_results: true
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      known_good_version: 0.10.0
      package: golang.org/x/tools/cmd/goimports
      runtime: go
      stdin: true
    - name: golangci-lint
      type: golangci_lint
      files:
        - go
      command:
        - golangci-lint
        - run
        - --out-format
        - json
        - --timeout
        - 10m
        - --concurrency
        - 1
        - --exclude
        - gofmt
        - --allow-parallel-runners
        - --issues-exit-code
        - 0
        - ${target}
      success_codes:
        - 0
        - 2
        - 7
      affects_cache:
        - go.mod
        - go.sum
      direct_configs:
        - .golangci.yml
        - .golangci.yaml
        - .golangci.toml
        - .golangci.json
      disable_upstream: true
      environment:
        - name: GOLANGCI_LINT_CACHE
          value: ${cachedir}
        - name: PATH
          list:
            - ${path}
        - name: GO111MODULE
          value: auto
      good_without_config: true
      issue_url_format: https://golangci-lint.run/usage/linters/
      known_good_version: 1.42.1
      package: github.com/golangci/golangci-lint/cmd/golangci-lint
      run_from_root_file: go.mod
      run_linter_from: root_file
      run_timeout: 10m
      runtime: go
      version_command:
        parse_regex: ${semver}
        run: golangci-lint --version
    - name: hadolint
      type: hadolint
      files:
        - docker
      command:
        - hadolint
        - ${target}
        - -f
        - json
        - --no-fail
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .hadolint.yaml
      download: hadolint
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://github.com/hadolint/hadolint/wiki/{}
      known_good_version: 2.8.0
      version_command:
        parse_regex: ${semver}
        run: hadolint --version
    - name: haml-lint
      type: haml_lint
      files:
        - haml
      command:
        - haml-lint
        - ${target}
        - --reporter=json
      success_codes:
        - 0
        - 65
      batch: true
      cache_results: false
      direct_configs:
        - .haml-lint.yml
      good_without_config: true
      is_recommended: true
      known_good_version: 0.40.0
      package: haml_lint
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: haml-lint --version
    - name: isort
      type: rewrite
      files:
        - python
      command:
        - isort
        - -q
        - --overwrite-in-place
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
        - setup.cfg
        - tox.ini
        - .editorconfig
      batch: true
      direct_configs:
        - .isort.cfg
      formatter: true
      in_place: true
      issue_url_format: https://pypi.org/project/flake8-isort/
      known_good_version: 5.9.3
      package: isort
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: isort --version-number
    - name: ktlint
      type: ktlint
      files:
        - kotlin
      command:
        - ktlint
        - --stdin
        - -F
        - --reporter=json,output=${tmpfile}
      success_codes:
        - 0
        - 1
      affects_cache:
        - .editorconfig
      download: ktlint
      environment:
        - name: PATH
          list:
            - ${linter}
        - name: LANG
          value: en_US.UTF-8
      good_without_config: true
      is_recommended: false
      known_good_version: 0.43.2
      runtime: java
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: ktlint --version
    - name: markdownlint
      type: markdownlint
      files:
        - markdown
      command:
        - markdownlint
        - ${target}
        - --json
      success_codes:
        - 0
        - 1
      batch: true
      cache_results: true
      direct_configs:
        - .markdownlint.json
        - .markdownlint.yaml
        - .markdownlint.yml
        - .markdownlintrc
        - .markdownlint-cli2.json
        - .markdownlint-cli2.yaml
        - .markdownlint-cli2.jsonc
      good_without_config: true
      issue_url_format: https://github.com/DavidAnson/markdownlint/blob/main/doc/Rules.md#{}
      known_good_version: 0.31.1
      package: markdownlint-cli
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: markdownlint --version
    - name: mypy
      type: mypy
      files:
        - python
      command:
        - mypy
        - --ignore-missing-imports
        - --follow-imports=skip
        - --show-error-codes
        - --show-column-numbers
        - --no-strict-optional
        - ${target}
      success_codes:
        - 0
        - 1
      affects_cache:
        - pyproject.toml
        - setup.cfg
      direct_configs:
        - mypy.ini
        - .mypy.ini
      is_recommended: false
      issue_url_format: https://mypy.readthedocs.io/en/stable/error_code_list.html
      known_good_version: 0.931
      package: mypy
      runtime: python
      stdin: false
      version_command:
        parse_regex: ${semver}
        run: mypy --version
    - name: prettier
      type: rewrite
      files:
        - typescript
        - yaml
        - css
        - sass
        - html
        - markdown
        - json
        - javascript
        - graphql
        - prettier_supported_configs
      command:
        - prettier
        - -w
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - package.json
        - .editorconfig
      batch: true
      direct_configs:
        - .prettierrc
        - .prettierrc.json
        - .prettierrc.yml
        - .prettierrc.yaml
        - .prettierrc.json5
        - .prettierrc.js
        - .prettierrc.cjs
        - prettier.config.js
        - prettier.config.cjs
        - .prettierrc.toml
      enabled: true
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: 2.5.1
      package: prettier
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: prettier --version
    - name: pylint
      type: pylint
      files:
        - python
      command:
        - pylint
        - --exit-zero
        - -f
        - json
        - ${target}
      error_codes:
        - 32
      affects_cache:
        - pyproject.toml
        - setup.cfg
      batch: true
      cache_results: true
      direct_configs:
        - pylintrc
        - .pylintrc
      issue_url_format: http://pylint-messages.wikidot.com/messages:{}
      known_good_version: 2.11.1
      package: pylint
      runtime: python
      version_command:
        parse_regex: pylint ${semver}
        run: pylint --version
    - name: rubocop
      type: rubocop
      files:
        - ruby
        - gemspec
      command:
        - rubocop
        - --stderr
        - --format
        - json
        - ${target}
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .rubocop.yml
      issue_url_format: https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/{}
      known_good_version: 1.22.2
      package: rubocop
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rubocop --version
    - name: rubocop-fmt
      type: rewrite
      files:
        - ruby
        - gemspec
      command:
        - rubocop
        - --stderr
        - --fix-layout
        - ${target}
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .rubocop.yml
      formatter: true
      in_place: true
      known_good_version: 1.22.2
      package: rubocop
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rubocop --version
    - name: rufo
      type: rewrite
      files:
        - ruby
      command:
        - rufo
        - ${target}
      success_codes:
        - 0
        - 3
      batch: true
      cache_results: true
      direct_configs:
        - .rufo
      formatter: true
      in_place: true
      known_good_version: 0.1.13
      package: rufo
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rufo --version
    - name: rustfmt
      type: rewrite
      files:
        - rust
      command:
        - rustfmt
      success_codes:
        - 0
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      cache_results: true
      direct_configs:
        - rustfmt.toml
        - .rustfmt.toml
      download: rust
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      good_without_config: true
      known_good_version: 1.58.1
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: rustfmt --version
    - name: scalafmt
      type: rewrite
      files:
        - scala
      command:
        - scalafmt
        - --stdin
        - --stdout
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .scalafmt.conf
      download: scalafmt
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      run_from_root_target: .scalafmt.conf
      run_linter_from: root_file
      stdin: true
      version_command:
        parse_regex: scalafmt ${semver}
        run: scalafmt --version
    - name: semgrep
      type: semgrep
      files:
        - python
        - javascript
        - go
      command:
        - semgrep
        - --config=p/r2c-ci
        - ${target}
        - --json
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .semgrep.yaml
      environment:
        - name: PATH
          list:
            - ${path}
      known_good_version: 0.83.0
      package: semgrep
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: semgrep --version
    - name: shellcheck
      type: shellcheck
      files:
        - shell
      command:
        - shellcheck
        - ${target}
        - -f
        - json
        - --external-sources
      error_codes:
        - 2
      direct_configs:
        - .shellcheckrc
        - shellcheckrc
      download: shellcheck
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://github.com/koalaman/shellcheck/wiki/{}
      known_good_version: 0.8.0
      version_command:
        parse_regex: ${semver}
        run: shellcheck --version
    - name: shfmt
      type: shfmt
      files:
        - shell
      command:
        - shfmt
        - -s
        - -filename
        - ${target}
        - "-"
      success_codes:
        - 0
        - 1
      affects_cache:
        - .editorconfig
      cache_results: true
      formatter: true
      good_without_config: true
      known_good_version: 3.4.0
      package: mvdan.cc/sh/v${major_version}/cmd/shfmt
      runtime: go
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: shfmt --version
    - name: standardrb
      type: rubocop
      files:
        - ruby
        - gemspec
      command:
        - standardrb
        - ${target}
        - --stderr
        - --format
        - json
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .standard.yml
      issue_url_format: https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/{}
      known_good_version: 1.3.0
      package: standard
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: standardrb --version
    - name: stylelint
      type: stylelint
      files:
        - css
        - sass
      command:
        - stylelint
        - -f
        - json
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - package.json
        - .stylelintignore
      direct_configs:
        - .stylelintrc
        - .stylelintrc.json
        - .stylelintrc.yml
        - .stylelintrc.yaml
        - .stylelintrc.js
        - .stylelintrc.cjs
      known_good_version: 14.6.1
      package: stylelint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: stylelint --version
    - name: stylelint-fmt
      type: rewrite
      files:
        - css
        - sass
      command:
        - stylelint
        - --fix
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - package.json
        - .stylelintignore
      direct_configs:
        - .stylelintrc
        - .stylelintrc.json
        - .stylelintrc.yml
        - .stylelintrc.yaml
        - .stylelintrc.js
        - .stylelintrc.cjs
      formatter: true
      in_place: true
      known_good_version: 14.6.1
      package: stylelint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: stylelint --version
    - name: taplo
      type: taplo
      files:
        - toml
      command:
        - taplo
        - lint
        - ${target}
      success_codes:
        - 0
        - 1
      direct_configs:
        - .taplo.toml
        - taplo.toml
      download: taplo
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      known_good_version: release-cli-0.6.0
      version_command:
        parse_regex: Taplo TOML Utility ${semver}
        run: taplo --version
    - name: taplo-fmt
      type: rewrite
      files:
        - toml
      command:
        - taplo
        - format
        - ${target}
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .taplo.toml
        - taplo.toml
      download: taplo
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: release-cli-0.6.0
      version_command:
        parse_regex: Taplo TOML Utility ${semver}
        run: taplo --version
    - name: terraform-fmt
      type: rewrite
      files:
        - terraform
      command:
        - terraform
        - fmt
        - -no-color
        - "-"
      success_codes:
        - 0
      cache_results: true
      download: terraform
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      known_good_version: 1.1.0
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: terraform --version
    - name: terraform-validate
      type: terraform_validate
      files:
        - terraform
      command:
        - terraform
        - validate
        - -json
      success_codes:
        - 0
        - 1
      download: terraform
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      known_good_version: 1.1.0
      run_linter_from: directory
      version_command:
        parse_regex: ${semver}
        run: terraform --version
    - name: tflint
      type: sarif
      files:
        - terraform
      command:
        - tflint
        - --format=sarif
        - ${target}
        - --force
      success_codes:
        - 0
      direct_configs:
        - .tflint.hcl
      download: tflint
      environment:
        - name: PATH
          list:
            - ${linter}
        - name: TFLINT_PLUGIN_DIR
          value: ${shared_cachedir}
      good_without_config: true
      known_good_version: 0.35.0
      prepare_command:
        - tflint
        - --init
      read_output_from: stdout
      version_command:
        parse_regex: ${semver}
        run: tflint --version
    - name: yapf
      type: rewrite
      files:
        - python
      command:
        - yapf
        - --in-place
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - setup.cfg
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      direct_configs:
        - .style.yapf
        - .yapfignore
      formatter: true
      in_place: true
      known_good_version: 0.32.0
      package: yapf
      runtime: python
      version_command:
        parse_regex: yapf ${semver}
        run: yapf --version
  triggers:
    - linters:
        - hadolint
      paths:
        - dockerfile
        - dockerfile.*
      targets:
        - dockerfile
        - dockerfile.*
  enabled:
    - actionlint@1.6.12
    - buf-breaking@1.3.1
    - buf-lint@1.3.1
    - dotenv-linter@3.2.0
    - eslint@8.13.0
    - gitleaks@8.7.2
    - hadolint@2.10.0
    - prettier@2.6.2
  bazel:
    paths:
      system:
        - bazel
        - bazelisk
      workspace:
        - tools/bazel
        - bazelisk
  ignore:
    - linters:
        - ALL
      paths:
        - src/gen/**
    - linters:
        - prettier
      paths:
        - protos
        - package-lock.json
    - linters:
        - ALL
      paths:
        - "**/trunk"
version: 0.1
cli:
  version: 0.10.1-beta
downloads:
  - name: go
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://golang.org/dl/go${version}.linux-amd64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://golang.org/dl/go${version}.darwin-amd64.tar.gz
        strip_components: 1
  - name: jre-11
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu11.52.13-ca-jre11.0.13-linux_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu11.52.13-ca-jre11.0.13-macosx_x64.tar.gz
        strip_components: 1
  - name: jre-17
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-linux_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-macosx_x64.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          arm_64: ""
        url: https://cdn.azul.com/zulu/bin/zulu17.30.15-ca-jre17.0.1-macosx_aarch64.tar.gz
        strip_components: 1
  - name: node
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://nodejs.org/dist/v${version}/node-v${version}-linux-x64.tar.xz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://nodejs.org/dist/v${version}/node-v${version}-darwin-x64.tar.gz
        strip_components: 1
  - name: python
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://github.com/indygreg/python-build-standalone/releases/download/20220318/cpython-${version}+20220318-x86_64-unknown-linux-gnu-install_only.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://github.com/indygreg/python-build-standalone/releases/download/20220318/cpython-${version}+20220318-x86_64-apple-darwin-install_only.tar.gz
        strip_components: 1
  - name: ruby-build
    version: 20220125
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://github.com/rbenv/ruby-build/archive/refs/tags/v20220125.tar.gz
        strip_components: 1
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://github.com/rbenv/ruby-build/archive/refs/tags/v20220125.tar.gz
        strip_components: 1
  - name: rust
    downloads:
      - os:
          linux: ""
        cpu:
          x86_64: ""
        url: https://static.rust-lang.org/dist/rust-${version}-x86_64-unknown-linux-gnu.tar.gz
        strip_components: 2
      - os:
          macos: ""
        cpu:
          x86_64: ""
        url: https://static.rust-lang.org/dist/rust-${version}-x86_64-apple-darwin.tar.gz
        strip_components: 2
environments:
  - name: SYSTEM
    environment:
      - name: PATH
        list:
          - ${path}
runtimes:
  definitions:
    - type: node
      download: node
      enabled: true
      linter_environment:
        - name: PATH
          list:
            - ${linter}/node_modules/.bin
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      system_version: ignored
      version: 14.17.4
      version_commands:
        - parse_regex: ${semver}
          run: node --version
    - type: python
      download: python
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: VIRTUAL_ENV
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      version: 3.9.11
      version_commands:
        - parse_regex: Python ${semver}
          run: python --version
    - type: go
      download: go
      enabled: true
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: GOPATH
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: GOROOT
          value: ${runtime}
        - name: GO111MODULE
          value: on
        - name: CGO_ENABLED
          value: 0
      system_version: ignored
      version: 1.16.7
      version_commands:
        - parse_regex: go version go(.*) (.*)
          run: go version
    - type: rust
      download: rust
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
      version: 1.58.1
      version_commands:
        - parse_regex: ${semver}
          run: rustc --version
    - type: ruby
      download: ruby-build
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
        - name: GEM_HOME
          value: ${linter}
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: LD_LIBRARY_PATH
          list:
            - ${runtime}/lib
      version: 3.1.0
      version_commands:
        - parse_regex: ruby ([0-9\.]+)(p+.*)
          run: ruby --version
    - type: java
      download: jre-11
      linter_environment:
        - name: PATH
          list:
            - ${linter}/bin
      runtime_environment:
        - name: HOME
          value: ${home}
        - name: PATH
          list:
            - ${runtime}/bin
        - name: JAVA_HOME
          value: ${runtime}
      version: 11.0.13
      version_commands:
        - parse_regex: ${semver}
          run: java --version
        - parse_regex: java version "(.*)"
          run: java -version
actions:
  definitions:
    - enabled: false
      name: announce
      triggers:
        - git_hooks:
            - post-checkout
          run: trunk show-announcements checkout ${0} ${1}
        - git_hooks:
            - post-merge
          run: trunk show-announcements merge
        - git_hooks:
            - pre-rebase
          run: trunk show-announcements pre-rebase ${@}
    - enabled: false
      name: git-lfs
      triggers:
        - git_hooks:
            - post-checkout
            - post-commit
            - post-merge
            - pre-push
          run: git lfs "${hook}" "${@}"
lint:
  comment_formats:
    - name: hash
      leading_delimiter: "#"
    - name: html-tag
      leading_delimiter: <!--
      trailing_delimiter: -->
    - name: hyphen-hash
      leading_delimiter: -#
    - name: slashes-block
      leading_delimiter: /*
      trailing_delimiter: "*/"
    - name: slashes-inline
      leading_delimiter: //
  files:
    - name: ALL
      regexes:
        - .+
    - name: c++-source
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - cc
        - cpp
        - cxx
        - C
    - name: c++-header
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - hh
        - hpp
        - hxx
        - H
    - name: c++
      inherit:
        - c++-source
        - c++-header
    - name: python
      comments:
        - hash
      extensions:
        - py
        - py2
        - py3
      shebangs:
        - python
        - python3
    - name: c-source
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - c
    - name: c-header
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - h
    - name: c
      inherit:
        - c-source
        - c-header
    - name: c/c++
      inherit:
        - c
        - c++
    - name: c/c++-source
      inherit:
        - c-source
        - c++-source
    - name: bazel-build
      comments:
        - hash
      extensions:
        - BUILD
      filenames:
        - BUILD
        - BUILD.bazel
    - name: bazel-workspace
      comments:
        - hash
      filenames:
        - WORKSPACE
        - WORKSPACE.bazel
    - name: starlark
      comments:
        - hash
      extensions:
        - bzl
    - name: shell
      comments:
        - hash
      extensions:
        - sh
        - bash
      shebangs:
        - sh
        - bash
    - name: zsh
      comments:
        - hash
      extensions:
        - zsh
      shebangs:
        - zsh
    - name: javascript
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - js
        - mjs
        - jsx
    - name: typescript
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - ts
        - tsx
    - name: yaml
      comments:
        - hash
      extensions:
        - yml
        - yaml
    - name: prettier_supported_configs
      filenames:
        - .prettierrc
        - .stylelintrc
    - name: css
      comments:
        - slashes-block
      extensions:
        - css
    - name: sass
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - sass
        - scss
    - name: html
      comments:
        - html-tag
      extensions:
        - html
    - name: markdown
      comments:
        - html-tag
      extensions:
        - md
        - mdx
    - name: json
      extensions:
        - json
        - jsonc
    - name: docker
      comments:
        - hash
      extensions:
        - Dockerfile
      filenames:
        - Dockerfile
    - name: go
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - go
    - name: proto
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - proto
    - name: rust
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - rs
    - name: terraform
      extensions:
        - tf
        - tf.json
    - name: ruby
      extensions:
        - rb
      shebangs:
        - ruby
    - name: gemspec
      extensions:
        - gemspec
      filenames:
        - Gemfile
    - name: kotlin
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - kt
        - kts
        - ktm
    - name: java
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - java
    - name: toml
      comments:
        - hash
      extensions:
        - toml
    - name: haml
      comments:
        - hyphen-hash
      extensions:
        - haml
    - name: graphql
      comments:
        - hash
      extensions:
        - graphql
    - name: scala
      comments:
        - slashes-inline
        - slashes-block
      extensions:
        - scala
        - sc
    - name: dotenv
      comments:
        - hash
      extensions:
        - env
  downloads:
    - name: actionlint
      version: 1.6.9
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/rhysd/actionlint/releases/download/v${version}/actionlint_${version}_linux_amd64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/rhysd/actionlint/releases/download/v${version}/actionlint_${version}_darwin_amd64.tar.gz
    - name: buf
      version: 1.0.0-rc11
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/bufbuild/buf/releases/download/v${version}/buf-Linux-x86_64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/bufbuild/buf/releases/download/v${version}/buf-Darwin-x86_64
    - name: buildifier
      version: 5.0.1
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/bazelbuild/buildtools/releases/download/${version}/buildifier-linux-amd64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/bazelbuild/buildtools/releases/download/${version}/buildifier-darwin-amd64
    - name: clang-format
      version: 14.0.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-format-${version}-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-format-${version}-macos-x86_64.tar.gz
    - name: clang-tidy
      version: 14.0.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-tidy-${version}-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://trunk.io/releases/clang-tidy-${version}-macos-x86_64.tar.gz
    - name: detekt
      version: 1.19.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/detekt/detekt/releases/download/v${version}/detekt-cli-${version}.zip
          strip_components: 1
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/detekt/detekt/releases/download/v${version}/detekt-cli-${version}.zip
          strip_components: 1
    - name: dotenv-linter
      version: 3.2.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/dotenv-linter/dotenv-linter/releases/download/v${version}/dotenv-linter-linux-x86_64.tar.gz
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/dotenv-linter/dotenv-linter/releases/download/v${version}/dotenv-linter-darwin-x86_64.tar.gz
    - name: hadolint
      version: 2.8.0
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Linux-x86_64
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Darwin-x86_64
    - name: ktlint
      version: 0.43.2
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/pinterest/ktlint/releases/download/${version}/ktlint
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/pinterest/ktlint/releases/download/${version}/ktlint
    - name: scalafmt
      version: 3.4.3
      executable: true
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/scalameta/scalafmt/releases/download/v${version}/scalafmt-linux-musl
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/scalameta/scalafmt/releases/download/v${version}/scalafmt-macos
    - name: shellcheck
      version: 0.8.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.linux.x86_64.tar.xz
          strip_components: 1
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.darwin.x86_64.tar.xz
          strip_components: 1
    - name: taplo
      args:
        semver: ${version}=>(release-cli-)*(?P<semver>.*)
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/${version}/taplo-x86_64-unknown-linux-gnu.tar.gz
          version: <0.6.0
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/${version}/taplo-x86_64-apple-darwin-gnu.tar.gz
          version: <0.6.0
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/release-cli-${semver}/taplo-${semver}-x86_64-unknown-linux-gnu.tar.gz
          version: ">=0.6.0"
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/tamasfe/taplo/releases/download/release-cli-${semver}/taplo-${semver}-x86_64-apple-darwin-gnu.tar.gz
          version: ">=0.6.0"
    - name: terraform
      version: 1.1.4
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://releases.hashicorp.com/terraform/${version}/terraform_${version}_linux_amd64.zip
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://releases.hashicorp.com/terraform/${version}/terraform_${version}_darwin_amd64.zip
    - name: tflint
      version: 0.35.0
      downloads:
        - os:
            linux: ""
          cpu:
            x86_64: ""
          url: https://github.com/terraform-linters/tflint/releases/download/v${version}/tflint_linux_amd64.zip
        - os:
            macos: ""
          cpu:
            x86_64: ""
          url: https://github.com/terraform-linters/tflint/releases/download/v${version}/tflint_darwin_amd64.zip
  linters:
    - name: actionlint
      type: actionlint
      files:
        - yaml
      command:
        - actionlint
        - -format
        - "{{json .}}"
        - ${target}
      success_codes:
        - 0
        - 1
      direct_configs:
        - .github/actionlint.yaml
        - .github/actionlint.yml
      download: actionlint
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      issue_url_format: https://github.com/rhysd/actionlint/blob/main/docs/checks.md
      known_good_version: 1.6.9
      version_command:
        parse_regex: ${semver}
        run: actionlint --version
    - name: ansible-lint
      type: ansible_lint
      command:
        - ansible-lint
        - --parseable-severity
      success_codes:
        - 0
        - 2
      direct_configs:
        - .ansible-lint
      environment:
        - name: PATH
          list:
            - ${path}
      extra_packages:
        - ansible
      good_without_config: true
      is_recommended: false
      issue_url_format: https://ansible-lint.readthedocs.io/en/latest/default_rules.html#{}
      known_good_version: 5.1.13
      package: ansible-lint
      run_linter_from: directory
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: ansible-lint --version
    - name: autopep8
      type: rewrite
      files:
        - python
      command:
        - autopep8
        - --in-place
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - .flake8
        - pyproject.toml
        - setup.cfg
        - tox.ini
      batch: true
      cache_results: true
      direct_configs:
        - .pep8
      formatter: true
      in_place: true
      issue_url_format: https://pycodestyle.pycqa.org/en/latest/intro.html#error-codes
      known_good_version: 1.5.7
      package: autopep8
      runtime: python
      stdin: true
      version_command:
        parse_regex: autopep8 ${semver}
        run: autopep8 --version
    - name: bandit
      type: bandit
      files:
        - python
      command:
        - bandit
        - --exit-zero
        - --format
        - json
        - ${target}
      success_codes:
        - 0
      batch: true
      cache_results: true
      direct_configs:
        - .bandit
      issue_url_format: https://pypi.org/project/bandit/
      known_good_version: 1.7.3
      package: bandit
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: bandit --version
    - name: black
      type: rewrite
      files:
        - python
      command:
        - black
        - -q
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: 22.3.0
      package: black[python2]
      runtime: python
      version_command:
        parse_regex: black, version (.*)
        run: black --version
    - name: black-py
      type: rewrite
      files:
        - python
      command:
        - black
        - -q
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      formatter: true
      in_place: true
      known_good_version: 22.3.0
      package: black[python2]
      runtime: python
      version_command:
        parse_regex: black, version (.*)
        run: black --version
    - name: brakeman
      type: brakeman
      files:
        - ruby
      command:
        - brakeman
        - -p
        - ${target}
        - -f
        - json
        - --no-pager
      success_codes:
        - 0
        - 1
        - 3
      direct_configs:
        - brakeman.ignore
      known_good_version: 5.1.2
      package: brakeman
      run_from_root_target: apps
      run_linter_from: root_directory
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: brakeman --version
    - name: buf-breaking
      type: buf
      files:
        - proto
      command:
        - buf
        - breaking
        - --against
        - .git#branch=${upstream-ref}
        - --error-format
        - json
        - --path
        - ${target}
      success_codes:
        - 0
        - 100
      affects_cache:
        - buf.yaml
        - buf.lock
        - buf.gen.yaml
        - buf.work.yaml
      direct_configs:
        - buf.yaml
        - buf.work.yaml
      download: buf
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
            - ${path}
      is_recommended: false
      issue_url_format: https://docs.buf.build/breaking/rules#{}
      known_good_version: 1.1.0
      run_from_root_file: buf.work.yaml
      run_linter_from: root_file
      version_command:
        parse_regex: ${semver}
        run: buf --version
    - name: buf-lint
      type: buf
      files:
        - proto
      command:
        - buf
        - lint
        - --path
        - ${target}
        - --error-format
        - json
      success_codes:
        - 0
        - 100
      affects_cache:
        - buf.yaml
        - buf.lock
        - buf.gen.yaml
        - buf.work.yaml
      direct_configs:
        - buf.yaml
      download: buf
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://docs.buf.build/lint/rules#{}
      known_good_version: 1.1.0
      run_from_root_file: buf.yaml
      run_linter_from: root_file
      version_command:
        parse_regex: ${semver}
        run: buf --version
    - name: buildifier
      type: buildifier
      files:
        - starlark
        - bazel-build
        - bazel-workspace
      command:
        - buildifier
        - --lint
        - fix
      success_codes:
        - 0
      cache_results: true
      download: buildifier
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      known_good_version: 4.0.1
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: buildifier --version
    - name: cfnlint
      type: cfnlint
      files:
        - yaml
      command:
        - cfn-lint
        - -t
        - ${target}
        - -f=json
      error_codes:
        - 32
      batch: true
      cache_results: true
      good_without_config: true
      issue_url_format: https://github.com/aws-cloudformation/cfn-lint/blob/main/docs/rules.md
      known_good_version: 0.58.2
      package: cfn-lint
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: cfn-lint --version
    - name: clang-format
      type: rewrite
      files:
        - c/c++
        - proto
      command:
        - clang-format
        - --assume-filename=${target}
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .clang-format
      download: clang-format
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      known_good_version: 14.0.0
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: clang-format --version
    - name: clang-tidy
      type: llvm
      files:
        - c/c++-source
      command:
        - clang-tidy
        - --export-fixes=-
        - ${target}
      success_codes:
        - 0
        - 1
      cache_results: true
      direct_configs:
        - .clang-tidy
      download: clang-tidy
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      include_scanner_type: compile_command
      issue_url_format: https://clang.llvm.org/extra/clang-tidy/checks/{}.html
      known_good_version: 14.0.0
      run_timeout: 10m
      version_command:
        parse_regex: ${semver}
        run: clang-tidy --version
    - name: clippy
      type: clippy
      files:
        - rust
      command:
        - cargo
        - clippy
        - --message-format
        - json
        - --
        - --cap-lints=warn
        - --no-deps
      success_codes:
        - 0
        - 101
        - 383
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      direct_configs:
        - clippy.toml
        - .clippy.toml
      disable_upstream: true
      download: rust
      environment:
        - name: PATH
          list:
            - ${linter}/bin
            - ${path}
        - name: CARGO_HOME
          value: ${cachedir}/cargo_home
        - name: CARGO_TARGET_DIR
          value: ${cachedir}/cargo_target_dir
      good_without_config: true
      issue_url_format: https://rust-lang.github.io/rust-clippy/master/#{}
      known_good_version: 1.58.1
      run_linter_from: directory
      version_command:
        parse_regex: ${semver}
        run: cargo clippy --version
    - name: detekt
      type: sarif
      files:
        - kotlin
      command:
        - detekt-cli
        - --build-upon-default-config
        - --config
        - .detekt.yaml
        - --input
        - ${target}
        - --report
        - sarif:${tmpfile}
      success_codes:
        - 0
        - 2
      direct_configs:
        - .detekt.yaml
      download: detekt
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      known_good_version: 1.19.0
      read_output_from: tmp_file
      runtime: java
      version_command:
        parse_regex: ${semver}
        run: detekt-cli --version
    - name: detekt-explicit
      type: sarif
      files:
        - kotlin
      command:
        - detekt-cli
        - --config
        - .detekt.yaml
        - --input
        - ${target}
        - --report
        - sarif:${tmpfile}
        - --auto-correct
      success_codes:
        - 0
        - 2
      direct_configs:
        - .detekt.yaml
      download: detekt
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      known_good_version: 1.19.0
      read_output_from: tmp_file
      runtime: java
      version_command:
        parse_regex: ${semver}
        run: detekt-cli --version
    - name: detekt-gradle
      type: detekt_gradle
      files:
        - kotlin
      command:
        - ${workspace}/gradlew
        - detekt
        - --info
        - --continue
      success_codes:
        - 0
        - 1
      disable_upstream: true
      environment:
        - name: PATH
          list:
            - ${path}
      is_recommended: false
      run_timeout: 5m
    - name: dotenv-linter
      type: rewrite
      files:
        - dotenv
      command:
        - dotenv-linter
        - --not-check-updates
        - fix
        - --quiet
        - --no-backup
        - ${target}
      success_codes:
        - 0
      cache_results: true
      download: dotenv-linter
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      in_place: true
      version_command:
        parse_regex: dotenv-linter ${semver}
        run: dotenv-linter --version
    - name: eslint
      type: eslint
      files:
        - typescript
        - javascript
      command:
        - eslint
        - --format
        - json
        - ${target}
      error_codes:
        - 2
      affects_cache:
        - .eslintignore
        - package.json
        - tsconfig.json
      batch: true
      direct_configs:
        - .eslintrc
        - .eslintrc.js
        - .eslintrc.cjs
        - .eslintrc.yaml
        - .eslintrc.yml
        - .eslintrc.json
      enabled: true
      issue_url_format: https://eslint.org/docs/rules/{}
      known_good_version: 8.10.0
      package: eslint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: eslint --version
    - name: flake8
      type: flake8
      files:
        - python
      command:
        - flake8
        - ${target}
        - --format
        - TRUNK-FLAKE8:%(path)sTRUNK-FLAKE8%(row)dTRUNK-FLAKE8%(col)dTRUNK-FLAKE8%(code)sTRUNK-FLAKE8%(text)s
        - --exit-zero
      success_codes:
        - 0
      affects_cache:
        - setup.cfg
        - tox.ini
      batch: true
      cache_results: true
      direct_configs:
        - .flake8
      issue_url_format: https://www.flake8rules.com/rules/{}.html
      known_good_version: 4.0.1
      package: flake8
      run_linter_from: parent_directory
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: flake8 --version
    - name: gitleaks
      type: gitleaks
      files:
        - ALL
      command:
        - gitleaks
        - --quiet
        - --no-git
        - --path=${target}
        - --leaks-exit-code=101
        - --append-repo-config
      success_codes:
        - 0
        - 101
      direct_configs:
        - .gitleaks.config
        - .gitleaks.toml
      enabled: true
      good_without_config: true
      known_good_version: 8.3.0
      package: github.com/zricethezav/gitleaks/v${major_version}
      runtime: go
    - name: gofmt
      type: rewrite
      files:
        - go
      command:
        - gofmt
        - ${target}
      success_codes:
        - 0
      cache_results: true
      download: go
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      good_without_config: true
      known_good_version: 1.16.7
      stdin: true
    - name: goimports
      type: rewrite
      files:
        - go
      command:
        - goimports
        - ${target}
      success_codes:
        - 0
      cache_results: true
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      known_good_version: 0.10.0
      package: golang.org/x/tools/cmd/goimports
      runtime: go
      stdin: true
    - name: golangci-lint
      type: golangci_lint
      files:
        - go
      command:
        - golangci-lint
        - run
        - --out-format
        - json
        - --timeout
        - 10m
        - --concurrency
        - 1
        - --exclude
        - gofmt
        - --allow-parallel-runners
        - --issues-exit-code
        - 0
        - ${target}
      success_codes:
        - 0
        - 2
        - 7
      affects_cache:
        - go.mod
        - go.sum
      direct_configs:
        - .golangci.yml
        - .golangci.yaml
        - .golangci.toml
        - .golangci.json
      disable_upstream: true
      environment:
        - name: GOLANGCI_LINT_CACHE
          value: ${cachedir}
        - name: PATH
          list:
            - ${path}
        - name: GO111MODULE
          value: auto
      good_without_config: true
      issue_url_format: https://golangci-lint.run/usage/linters/
      known_good_version: 1.42.1
      package: github.com/golangci/golangci-lint/cmd/golangci-lint
      run_from_root_file: go.mod
      run_linter_from: root_file
      run_timeout: 10m
      runtime: go
      version_command:
        parse_regex: ${semver}
        run: golangci-lint --version
    - name: hadolint
      type: hadolint
      files:
        - docker
      command:
        - hadolint
        - ${target}
        - -f
        - json
        - --no-fail
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .hadolint.yaml
      download: hadolint
      enabled: true
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://github.com/hadolint/hadolint/wiki/{}
      known_good_version: 2.8.0
      version_command:
        parse_regex: ${semver}
        run: hadolint --version
    - name: haml-lint
      type: haml_lint
      files:
        - haml
      command:
        - haml-lint
        - ${target}
        - --reporter=json
      success_codes:
        - 0
        - 65
      batch: true
      cache_results: false
      direct_configs:
        - .haml-lint.yml
      good_without_config: true
      is_recommended: true
      known_good_version: 0.40.0
      package: haml_lint
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: haml-lint --version
    - name: isort
      type: rewrite
      files:
        - python
      command:
        - isort
        - -q
        - --overwrite-in-place
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - pyproject.toml
        - setup.cfg
        - tox.ini
        - .editorconfig
      batch: true
      direct_configs:
        - .isort.cfg
      formatter: true
      in_place: true
      issue_url_format: https://pypi.org/project/flake8-isort/
      known_good_version: 5.9.3
      package: isort
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: isort --version-number
    - name: ktlint
      type: ktlint
      files:
        - kotlin
      command:
        - ktlint
        - --stdin
        - -F
        - --reporter=json,output=${tmpfile}
      success_codes:
        - 0
        - 1
      affects_cache:
        - .editorconfig
      download: ktlint
      environment:
        - name: PATH
          list:
            - ${linter}
        - name: LANG
          value: en_US.UTF-8
      good_without_config: true
      is_recommended: false
      known_good_version: 0.43.2
      runtime: java
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: ktlint --version
    - name: markdownlint
      type: markdownlint
      files:
        - markdown
      command:
        - markdownlint
        - ${target}
        - --json
      success_codes:
        - 0
        - 1
      batch: true
      cache_results: true
      direct_configs:
        - .markdownlint.json
        - .markdownlint.yaml
        - .markdownlint.yml
        - .markdownlintrc
        - .markdownlint-cli2.json
        - .markdownlint-cli2.yaml
        - .markdownlint-cli2.jsonc
      good_without_config: true
      issue_url_format: https://github.com/DavidAnson/markdownlint/blob/main/doc/Rules.md#{}
      known_good_version: 0.31.1
      package: markdownlint-cli
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: markdownlint --version
    - name: mypy
      type: mypy
      files:
        - python
      command:
        - mypy
        - --ignore-missing-imports
        - --follow-imports=skip
        - --show-error-codes
        - --show-column-numbers
        - --no-strict-optional
        - ${target}
      success_codes:
        - 0
        - 1
      affects_cache:
        - pyproject.toml
        - setup.cfg
      direct_configs:
        - mypy.ini
        - .mypy.ini
      is_recommended: false
      issue_url_format: https://mypy.readthedocs.io/en/stable/error_code_list.html
      known_good_version: 0.931
      package: mypy
      runtime: python
      stdin: false
      version_command:
        parse_regex: ${semver}
        run: mypy --version
    - name: prettier
      type: rewrite
      files:
        - typescript
        - yaml
        - css
        - sass
        - html
        - markdown
        - json
        - javascript
        - graphql
        - prettier_supported_configs
      command:
        - prettier
        - -w
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - package.json
        - .editorconfig
      batch: true
      direct_configs:
        - .prettierrc
        - .prettierrc.json
        - .prettierrc.yml
        - .prettierrc.yaml
        - .prettierrc.json5
        - .prettierrc.js
        - .prettierrc.cjs
        - prettier.config.js
        - prettier.config.cjs
        - .prettierrc.toml
      enabled: true
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: 2.5.1
      package: prettier
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: prettier --version
    - name: pylint
      type: pylint
      files:
        - python
      command:
        - pylint
        - --exit-zero
        - -f
        - json
        - ${target}
      error_codes:
        - 32
      affects_cache:
        - pyproject.toml
        - setup.cfg
      batch: true
      cache_results: true
      direct_configs:
        - pylintrc
        - .pylintrc
      issue_url_format: http://pylint-messages.wikidot.com/messages:{}
      known_good_version: 2.11.1
      package: pylint
      runtime: python
      version_command:
        parse_regex: pylint ${semver}
        run: pylint --version
    - name: rubocop
      type: rubocop
      files:
        - ruby
        - gemspec
      command:
        - rubocop
        - --stderr
        - --format
        - json
        - ${target}
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .rubocop.yml
      issue_url_format: https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/{}
      known_good_version: 1.22.2
      package: rubocop
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rubocop --version
    - name: rubocop-fmt
      type: rewrite
      files:
        - ruby
        - gemspec
      command:
        - rubocop
        - --stderr
        - --fix-layout
        - ${target}
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .rubocop.yml
      formatter: true
      in_place: true
      known_good_version: 1.22.2
      package: rubocop
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rubocop --version
    - name: rufo
      type: rewrite
      files:
        - ruby
      command:
        - rufo
        - ${target}
      success_codes:
        - 0
        - 3
      batch: true
      cache_results: true
      direct_configs:
        - .rufo
      formatter: true
      in_place: true
      known_good_version: 0.1.13
      package: rufo
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: rufo --version
    - name: rustfmt
      type: rewrite
      files:
        - rust
      command:
        - rustfmt
      success_codes:
        - 0
      affects_cache:
        - Cargo.toml
        - Cargo.lock
      cache_results: true
      direct_configs:
        - rustfmt.toml
        - .rustfmt.toml
      download: rust
      environment:
        - name: PATH
          list:
            - ${linter}/bin
      formatter: true
      good_without_config: true
      known_good_version: 1.58.1
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: rustfmt --version
    - name: scalafmt
      type: rewrite
      files:
        - scala
      command:
        - scalafmt
        - --stdin
        - --stdout
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .scalafmt.conf
      download: scalafmt
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      run_from_root_target: .scalafmt.conf
      run_linter_from: root_file
      stdin: true
      version_command:
        parse_regex: scalafmt ${semver}
        run: scalafmt --version
    - name: semgrep
      type: semgrep
      files:
        - python
        - javascript
        - go
      command:
        - semgrep
        - --config=p/r2c-ci
        - ${target}
        - --json
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .semgrep.yaml
      environment:
        - name: PATH
          list:
            - ${path}
      known_good_version: 0.83.0
      package: semgrep
      runtime: python
      version_command:
        parse_regex: ${semver}
        run: semgrep --version
    - name: shellcheck
      type: shellcheck
      files:
        - shell
      command:
        - shellcheck
        - ${target}
        - -f
        - json
        - --external-sources
      error_codes:
        - 2
      direct_configs:
        - .shellcheckrc
        - shellcheckrc
      download: shellcheck
      environment:
        - name: PATH
          list:
            - ${linter}
      issue_url_format: https://github.com/koalaman/shellcheck/wiki/{}
      known_good_version: 0.8.0
      version_command:
        parse_regex: ${semver}
        run: shellcheck --version
    - name: shfmt
      type: shfmt
      files:
        - shell
      command:
        - shfmt
        - -s
        - -filename
        - ${target}
        - "-"
      success_codes:
        - 0
        - 1
      affects_cache:
        - .editorconfig
      cache_results: true
      formatter: true
      good_without_config: true
      known_good_version: 3.4.0
      package: mvdan.cc/sh/v${major_version}/cmd/shfmt
      runtime: go
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: shfmt --version
    - name: standardrb
      type: rubocop
      files:
        - ruby
        - gemspec
      command:
        - standardrb
        - ${target}
        - --stderr
        - --format
        - json
      success_codes:
        - 0
        - 1
      batch: true
      direct_configs:
        - .standard.yml
      issue_url_format: https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/{}
      known_good_version: 1.3.0
      package: standard
      runtime: ruby
      version_command:
        parse_regex: ${semver}
        run: standardrb --version
    - name: stylelint
      type: stylelint
      files:
        - css
        - sass
      command:
        - stylelint
        - -f
        - json
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - package.json
        - .stylelintignore
      direct_configs:
        - .stylelintrc
        - .stylelintrc.json
        - .stylelintrc.yml
        - .stylelintrc.yaml
        - .stylelintrc.js
        - .stylelintrc.cjs
      known_good_version: 14.6.1
      package: stylelint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: stylelint --version
    - name: stylelint-fmt
      type: rewrite
      files:
        - css
        - sass
      command:
        - stylelint
        - --fix
        - ${target}
      success_codes:
        - 0
        - 2
      affects_cache:
        - package.json
        - .stylelintignore
      direct_configs:
        - .stylelintrc
        - .stylelintrc.json
        - .stylelintrc.yml
        - .stylelintrc.yaml
        - .stylelintrc.js
        - .stylelintrc.cjs
      formatter: true
      in_place: true
      known_good_version: 14.6.1
      package: stylelint
      runtime: node
      version_command:
        parse_regex: ${semver}
        run: stylelint --version
    - name: taplo
      type: taplo
      files:
        - toml
      command:
        - taplo
        - lint
        - ${target}
      success_codes:
        - 0
        - 1
      direct_configs:
        - .taplo.toml
        - taplo.toml
      download: taplo
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      known_good_version: release-cli-0.6.0
      version_command:
        parse_regex: Taplo TOML Utility ${semver}
        run: taplo --version
    - name: taplo-fmt
      type: rewrite
      files:
        - toml
      command:
        - taplo
        - format
        - ${target}
      success_codes:
        - 0
      cache_results: true
      direct_configs:
        - .taplo.toml
        - taplo.toml
      download: taplo
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      in_place: true
      known_good_version: release-cli-0.6.0
      version_command:
        parse_regex: Taplo TOML Utility ${semver}
        run: taplo --version
    - name: terraform-fmt
      type: rewrite
      files:
        - terraform
      command:
        - terraform
        - fmt
        - -no-color
        - "-"
      success_codes:
        - 0
      cache_results: true
      download: terraform
      environment:
        - name: PATH
          list:
            - ${linter}
      formatter: true
      good_without_config: true
      known_good_version: 1.1.0
      stdin: true
      version_command:
        parse_regex: ${semver}
        run: terraform --version
    - name: terraform-validate
      type: terraform_validate
      files:
        - terraform
      command:
        - terraform
        - validate
        - -json
      success_codes:
        - 0
        - 1
      download: terraform
      environment:
        - name: PATH
          list:
            - ${linter}
      good_without_config: true
      known_good_version: 1.1.0
      run_linter_from: directory
      version_command:
        parse_regex: ${semver}
        run: terraform --version
    - name: tflint
      type: sarif
      files:
        - terraform
      command:
        - tflint
        - --format=sarif
        - ${target}
        - --force
      success_codes:
        - 0
      direct_configs:
        - .tflint.hcl
      download: tflint
      environment:
        - name: PATH
          list:
            - ${linter}
        - name: TFLINT_PLUGIN_DIR
          value: ${shared_cachedir}
      good_without_config: true
      known_good_version: 0.35.0
      prepare_command:
        - tflint
        - --init
      read_output_from: stdout
      version_command:
        parse_regex: ${semver}
        run: tflint --version
    - name: yapf
      type: rewrite
      files:
        - python
      command:
        - yapf
        - --in-place
        - ${target}
      success_codes:
        - 0
      affects_cache:
        - setup.cfg
        - pyproject.toml
      allow_empty_files: false
      batch: true
      cache_results: true
      direct_configs:
        - .style.yapf
        - .yapfignore
      formatter: true
      in_place: true
      known_good_version: 0.32.0
      package: yapf
      runtime: python
      version_command:
        parse_regex: yapf ${semver}
        run: yapf --version
  triggers:
    - linters:
        - hadolint
      paths:
        - dockerfile
        - dockerfile.*
      targets:
        - dockerfile
        - dockerfile.*
  enabled:
    - actionlint@1.6.12
    - buf-breaking@1.3.1
    - buf-lint@1.3.1
    - dotenv-linter@3.2.0
    - eslint@8.13.0
    - gitleaks@8.7.2
    - hadolint@2.10.0
    - prettier@2.6.2
  bazel:
    paths:
      system:
        - bazel
        - bazelisk
      workspace:
        - tools/bazel
        - bazelisk
  ignore:
    - linters:
        - ALL
      paths:
        - src/gen/**
    - linters:
        - prettier
      paths:
        - protos
        - package-lock.json
    - linters:
        - ALL
      paths:
        - "**/trunk"
